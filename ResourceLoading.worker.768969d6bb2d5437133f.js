!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.LoadingAsync=0]="LoadingAsync",e[e.LoadingSync=1]="LoadingSync",e[e.Loaded=2]="Loaded",e[e.Unloaded=3]="Unloaded",e[e.Failed=4]="Failed"}(t.ResourceStatus||(t.ResourceStatus={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),a=r(2),o=self,s={texture:new a.TextureLoader};onmessage=async e=>{i.onMessage(e)};class u{constructor(){this.processed=[],setInterval(()=>this.update(),u.kTickIntervalMs)}async onMessage(e){const t=e.data;for(let e of t){const t=s[e.source.type];if(t||(e.status=n.ResourceStatus.Failed),e.status===n.ResourceStatus.LoadingAsync)try{await t.loadAsync(e)}catch(t){e.status=n.ResourceStatus.Failed,e.error=t.message}this.processed.push(e)}}update(){if(this.processed.length>0){const e=[];for(let t of this.processed)Array.prototype.push.apply(e,t.transferList);o.postMessage(this.processed,e),this.processed.length=0}}}u.kTickIntervalMs=33;const i=new u;t.default={}},function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const a=r(0),o=n(r(3)),s=r(4);t.TextureLoader=class{async loadAsync(e){const t=await fetch(e.source.uri);if(200!=t.status)throw new Error("Failed to download image");const r=e.source.uri.match(/.*\/(.+?)\./);e.name=r&&r.length>1?r[1]:"Unknown",self.createImageBitmap?(e.imageBitmap=await createImageBitmap(await t.blob()),e.transferList.push(e.imageBitmap),e.status=a.ResourceStatus.LoadingSync):(e.imageBuffer=await t.arrayBuffer(),e.transferList.push(e.imageBuffer),e.status=a.ResourceStatus.LoadingSync)}loadSync(e,t){if(t.imageBitmap)t.texture=e.renderer.createTexture(t.name,{usage:o.Usage.Static,type:o.TextureType.Texture2D,format:o.TexelFormat.U8x3,maxAnistropy:16},t.imageBitmap),t.imageBitmap.close(),delete t.imageBitmap,t.status=a.ResourceStatus.Loaded;else{if(t.imageBuffer){var r=new Blob([t.imageBuffer],{type:"image/jpeg"});let e=window.URL.createObjectURL(r);delete t.imageBuffer,t.imageElement=new Image,t.imageElement.src=e,t.status=a.ResourceStatus.LoadingSync}s.defined(t.imageElement)&&t.imageElement.complete&&(t.texture=e.renderer.createTexture(t.name,{usage:o.Usage.Static,type:o.TextureType.Texture2D,format:o.TexelFormat.U8x3,maxAnistropy:16},t.imageElement),delete t.imageElement,t.status=a.ResourceStatus.Loaded)}}unloadSync(e,t){s.defined(t.texture)&&e.renderer.removeTexture(t.texture),s.defined(t.imageBitmap)&&t.imageBitmap.close()}}},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.kMaxShaderAttributes=16,t.kMaxShaderUniforms=64,t.kMaxShaderVertexBuffers=16,t.kDefaultRenderPass=0,function(e){e[e.VertexArrayObject=1]="VertexArrayObject",e[e.TextureFloat=2]="TextureFloat",e[e.TextureHalf=4]="TextureHalf",e[e.TextureFloatLinearFiltering=8]="TextureFloatLinearFiltering",e[e.TextureHalfLinearFiltering=16]="TextureHalfLinearFiltering",e[e.TextureWrite=32]="TextureWrite",e[e.ShaderDerivatives=64]="ShaderDerivatives",e[e.Instancing=128]="Instancing",e[e.AnistropicFiltering=256]="AnistropicFiltering"}(t.Feature||(t.Feature={})),function(e){e[e.Undefined=0]="Undefined",e[e.Float=1]="Float",e[e.Float2=2]="Float2",e[e.Float3=3]="Float3",e[e.Float4=4]="Float4",e[e.Int=5]="Int",e[e.Int2=6]="Int2",e[e.Int3=7]="Int3",e[e.Int4=8]="Int4",e[e.Uint=9]="Uint",e[e.Uint2=10]="Uint2",e[e.Uint3=11]="Uint3",e[e.Uint4=12]="Uint4",e[e.Short=13]="Short",e[e.Short2=14]="Short2",e[e.Short3=15]="Short3",e[e.Short4=16]="Short4",e[e.Ushort=17]="Ushort",e[e.Ushort2=18]="Ushort2",e[e.Ushort3=19]="Ushort3",e[e.Ushort4=20]="Ushort4",e[e.Char=21]="Char",e[e.Char2=22]="Char2",e[e.Char3=23]="Char3",e[e.Char4=24]="Char4",e[e.Uchar=25]="Uchar",e[e.Uchar2=26]="Uchar2",e[e.Uchar3=27]="Uchar3",e[e.Uchar4=28]="Uchar4",e[e.Half=29]="Half",e[e.Half2=30]="Half2",e[e.Half3=31]="Half3",e[e.Half4=32]="Half4",e[e.Float3x3=33]="Float3x3",e[e.Float3x4=34]="Float3x4",e[e.Float4x4=35]="Float4x4",e[e.Texture2D=240]="Texture2D",e[e.Texture3D=241]="Texture3D",e[e.TextureCube=242]="TextureCube"}(n=t.Type||(t.Type={})),function(e){e[e.Texture2D=240]="Texture2D",e[e.Texture3D=241]="Texture3D",e[e.TextureCube=242]="TextureCube"}(t.TextureType||(t.TextureType={})),function(e){e[e.Undefined=0]="Undefined",e[e.U565=1]="U565",e[e.U8=2]="U8",e[e.U8_sRGB=3]="U8_sRGB",e[e.U8x2=4]="U8x2",e[e.U8x2_sRGB=5]="U8x2_sRGB",e[e.U8x3=6]="U8x3",e[e.U8x3_sRGB=7]="U8x3_sRGB",e[e.U8x4=8]="U8x4",e[e.U8x4_sRGB=9]="U8x4_sRGB",e[e.U10_10_10_2=10]="U10_10_10_2",e[e.F11_11_10=11]="F11_11_10",e[e.F16=12]="F16",e[e.F16x2=13]="F16x2",e[e.F16x3=14]="F16x3",e[e.F16x4=15]="F16x4",e[e.F32x2=16]="F32x2",e[e.F32x3=17]="F32x3",e[e.F32x4=18]="F32x4",e[e.Depth32=19]="Depth32",e[e.Depth24Stencil8=20]="Depth24Stencil8"}(t.TexelFormat||(t.TexelFormat={})),function(e){e[e.Nearest=0]="Nearest",e[e.Linear=1]="Linear"}(t.TextureFilter||(t.TextureFilter={})),function(e){e[e.Never=0]="Never",e[e.Less=1]="Less",e[e.Equal=2]="Equal",e[e.LessEqual=3]="LessEqual",e[e.Greater=4]="Greater",e[e.NotEqual=5]="NotEqual",e[e.GreaterEqual=6]="GreaterEqual",e[e.Always=7]="Always"}(t.CompareFunc||(t.CompareFunc={})),function(e){e[e.Points=0]="Points",e[e.Lines=1]="Lines",e[e.LineLoop=2]="LineLoop",e[e.LineStrip=3]="LineStrip",e[e.Triangles=4]="Triangles",e[e.TriangleStrip=5]="TriangleStrip",e[e.TriangleFan=6]="TriangleFan"}(t.PrimitiveType||(t.PrimitiveType={})),function(e){e[e.Undefined=0]="Undefined",e[e.Uniform=1]="Uniform",e[e.Vertex=2]="Vertex",e[e.Index=3]="Index",e[e.Readback=4]="Readback"}(t.BufferType||(t.BufferType={})),function(e){e[e.Undefined=0]="Undefined",e[e.UniformBuffer=1]="UniformBuffer",e[e.Texture=2]="Texture"}(t.BindingType||(t.BindingType={})),function(e){e[e.None=0]="None",e[e.Static=1]="Static",e[e.Dynamic=2]="Dynamic"}(t.Usage||(t.Usage={})),function(e){e[e.None=0]="None",e[e.Back=1]="Back",e[e.Front=2]="Front"}(t.CullMode||(t.CullMode={})),function(e){e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Source=2]="Source",e[e.OneMinusSource=3]="OneMinusSource"}(t.BlendFactor||(t.BlendFactor={})),function(e){e[e.Vertex=0]="Vertex",e[e.Instance=1]="Instance"}(t.StepMode||(t.StepMode={})),t.TranslateTypeToSize=function(e){switch(e){case n.Float:return 4;case n.Float2:return 8;case n.Float3:return 12;case n.Float4:return 16;case n.Int:return 4;case n.Int2:return 8;case n.Int3:return 12;case n.Int4:return 16;case n.Uint:return 4;case n.Uint2:return 8;case n.Uint3:return 12;case n.Uint4:return 16;case n.Short:return 2;case n.Short2:return 4;case n.Short3:return 6;case n.Short4:return 8;case n.Ushort:return 2;case n.Ushort2:return 4;case n.Ushort3:return 6;case n.Ushort4:return 8;case n.Char:return 1;case n.Char2:return 2;case n.Char3:return 3;case n.Char4:return 4;case n.Uchar:return 1;case n.Uchar2:return 2;case n.Uchar3:return 3;case n.Uchar4:return 4;case n.Half:return 2;case n.Half2:return 4;case n.Half3:return 6;case n.Half4:return 8;case n.Float3x3:return 36;case n.Float4x4:return 64;default:throw new Error(`Unsupported type: ${e}`)}}},function(e,t,r){"use strict";function n(e,t=""){if(!e)throw console.error((new Error).stack),new Error(`Assert fail: ${t}`)}function a(e,t){return null!=e?e:t}Object.defineProperty(t,"__esModule",{value:!0}),t.assert=n,t.assertDefined=function(e,t){if(null!=e)return e;throw new Error(a(t,"Missing object"))},t.defined=function(e){return null!=e},t.defaultValue=a,t.arrayRemove=function(e,t){const r=e.indexOf(t);return n(r>=0),e.splice(r,1),r},t.nArray=function(e,t){const r=new Array(e);for(let n=0;n<e;n++)r[n]=t();return r}}]);