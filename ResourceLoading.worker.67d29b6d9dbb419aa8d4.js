!function(t){var n={};function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)r.d(e,a,function(n){return t[n]}.bind(null,a));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=4)}({4:function(t,n,r){"use strict";r.r(n);var e={};r.r(e),r.d(e,"create",(function(){return _})),r.d(e,"clone",(function(){return F})),r.d(e,"copy",(function(){return A})),r.d(e,"fromValues",(function(){return D})),r.d(e,"set",(function(){return N})),r.d(e,"identity",(function(){return L})),r.d(e,"transpose",(function(){return I})),r.d(e,"invert",(function(){return O})),r.d(e,"adjoint",(function(){return E})),r.d(e,"determinant",(function(){return V})),r.d(e,"multiply",(function(){return B})),r.d(e,"translate",(function(){return C})),r.d(e,"scale",(function(){return R})),r.d(e,"rotate",(function(){return q})),r.d(e,"rotateX",(function(){return k})),r.d(e,"rotateY",(function(){return P})),r.d(e,"rotateZ",(function(){return j})),r.d(e,"fromTranslation",(function(){return H})),r.d(e,"fromScaling",(function(){return W})),r.d(e,"fromRotation",(function(){return G})),r.d(e,"fromXRotation",(function(){return X})),r.d(e,"fromYRotation",(function(){return Z})),r.d(e,"fromZRotation",(function(){return $})),r.d(e,"fromRotationTranslation",(function(){return z})),r.d(e,"fromQuat2",(function(){return J})),r.d(e,"getTranslation",(function(){return Y})),r.d(e,"getScaling",(function(){return Q})),r.d(e,"getRotation",(function(){return K})),r.d(e,"fromRotationTranslationScale",(function(){return tt})),r.d(e,"fromRotationTranslationScaleOrigin",(function(){return nt})),r.d(e,"fromQuat",(function(){return rt})),r.d(e,"frustum",(function(){return et})),r.d(e,"perspective",(function(){return at})),r.d(e,"perspectiveFromFieldOfView",(function(){return ot})),r.d(e,"ortho",(function(){return it})),r.d(e,"lookAt",(function(){return ut})),r.d(e,"targetTo",(function(){return st})),r.d(e,"str",(function(){return ct})),r.d(e,"frob",(function(){return ft})),r.d(e,"add",(function(){return ht})),r.d(e,"subtract",(function(){return lt})),r.d(e,"multiplyScalar",(function(){return dt})),r.d(e,"multiplyScalarAndAdd",(function(){return mt})),r.d(e,"exactEquals",(function(){return Mt})),r.d(e,"equals",(function(){return pt})),r.d(e,"mul",(function(){return bt})),r.d(e,"sub",(function(){return xt}));var a={};r.r(a),r.d(a,"create",(function(){return gt})),r.d(a,"clone",(function(){return yt})),r.d(a,"length",(function(){return vt})),r.d(a,"fromValues",(function(){return wt})),r.d(a,"copy",(function(){return Tt})),r.d(a,"set",(function(){return Ut})),r.d(a,"add",(function(){return St})),r.d(a,"subtract",(function(){return _t})),r.d(a,"multiply",(function(){return Ft})),r.d(a,"divide",(function(){return At})),r.d(a,"ceil",(function(){return Dt})),r.d(a,"floor",(function(){return Nt})),r.d(a,"min",(function(){return Lt})),r.d(a,"max",(function(){return It})),r.d(a,"round",(function(){return Ot})),r.d(a,"scale",(function(){return Et})),r.d(a,"scaleAndAdd",(function(){return Vt})),r.d(a,"distance",(function(){return Bt})),r.d(a,"squaredDistance",(function(){return Ct})),r.d(a,"squaredLength",(function(){return Rt})),r.d(a,"negate",(function(){return qt})),r.d(a,"inverse",(function(){return kt})),r.d(a,"normalize",(function(){return Pt})),r.d(a,"dot",(function(){return jt})),r.d(a,"cross",(function(){return Ht})),r.d(a,"lerp",(function(){return Wt})),r.d(a,"hermite",(function(){return Gt})),r.d(a,"bezier",(function(){return Xt})),r.d(a,"random",(function(){return Zt})),r.d(a,"transformMat4",(function(){return $t})),r.d(a,"transformMat3",(function(){return zt})),r.d(a,"transformQuat",(function(){return Jt})),r.d(a,"rotateX",(function(){return Yt})),r.d(a,"rotateY",(function(){return Qt})),r.d(a,"rotateZ",(function(){return Kt})),r.d(a,"angle",(function(){return tn})),r.d(a,"zero",(function(){return nn})),r.d(a,"str",(function(){return rn})),r.d(a,"exactEquals",(function(){return en})),r.d(a,"equals",(function(){return an})),r.d(a,"sub",(function(){return un})),r.d(a,"mul",(function(){return sn})),r.d(a,"div",(function(){return cn})),r.d(a,"dist",(function(){return fn})),r.d(a,"sqrDist",(function(){return hn})),r.d(a,"len",(function(){return ln})),r.d(a,"sqrLen",(function(){return dn})),r.d(a,"forEach",(function(){return mn}));var o,i={};r.r(i),r.d(i,"create",(function(){return bn})),r.d(i,"identity",(function(){return xn})),r.d(i,"setAxisAngle",(function(){return gn})),r.d(i,"getAxisAngle",(function(){return yn})),r.d(i,"getAngle",(function(){return vn})),r.d(i,"multiply",(function(){return wn})),r.d(i,"rotateX",(function(){return Tn})),r.d(i,"rotateY",(function(){return Un})),r.d(i,"rotateZ",(function(){return Sn})),r.d(i,"calculateW",(function(){return _n})),r.d(i,"exp",(function(){return Fn})),r.d(i,"ln",(function(){return An})),r.d(i,"pow",(function(){return Dn})),r.d(i,"slerp",(function(){return Nn})),r.d(i,"random",(function(){return Ln})),r.d(i,"invert",(function(){return In})),r.d(i,"conjugate",(function(){return On})),r.d(i,"fromMat3",(function(){return En})),r.d(i,"fromEuler",(function(){return Vn})),r.d(i,"str",(function(){return Bn})),r.d(i,"clone",(function(){return Wn})),r.d(i,"fromValues",(function(){return Gn})),r.d(i,"copy",(function(){return Xn})),r.d(i,"set",(function(){return Zn})),r.d(i,"add",(function(){return $n})),r.d(i,"mul",(function(){return zn})),r.d(i,"scale",(function(){return Jn})),r.d(i,"dot",(function(){return Yn})),r.d(i,"lerp",(function(){return Qn})),r.d(i,"length",(function(){return Kn})),r.d(i,"len",(function(){return tr})),r.d(i,"squaredLength",(function(){return nr})),r.d(i,"sqrLen",(function(){return rr})),r.d(i,"normalize",(function(){return er})),r.d(i,"exactEquals",(function(){return ar})),r.d(i,"equals",(function(){return or})),r.d(i,"rotationTo",(function(){return ir})),r.d(i,"sqlerp",(function(){return ur})),r.d(i,"setAxes",(function(){return sr})),function(t){t[t.LoadingAsync=0]="LoadingAsync",t[t.LoadingSync=1]="LoadingSync",t[t.Loaded=2]="Loaded",t[t.Unloaded=3]="Unloaded",t[t.Failed=4]="Failed"}(o||(o={}));var u,s,c,f,h,l,d,m,M,p,b,x,g;function y(t,n=""){if(!t){const t=new Error(`Assert fail: ${n}`);throw console.error(t.stack),t}}function v(t,n){if(null!=t)return t;throw new Error(T(n,"Missing object"))}function w(t){return null!=t}function T(t,n){return null!=t?t:n}!function(t){t[t.VertexArrayObject=1]="VertexArrayObject",t[t.TextureFloat=2]="TextureFloat",t[t.TextureHalf=4]="TextureHalf",t[t.TextureFloatLinearFiltering=8]="TextureFloatLinearFiltering",t[t.TextureHalfLinearFiltering=16]="TextureHalfLinearFiltering",t[t.TextureWrite=32]="TextureWrite",t[t.ShaderDerivatives=64]="ShaderDerivatives",t[t.Instancing=128]="Instancing",t[t.AnistropicFiltering=256]="AnistropicFiltering"}(u||(u={})),function(t){t[t.Undefined=0]="Undefined",t[t.Float=1]="Float",t[t.Float2=2]="Float2",t[t.Float3=3]="Float3",t[t.Float4=4]="Float4",t[t.Int=5]="Int",t[t.Int2=6]="Int2",t[t.Int3=7]="Int3",t[t.Int4=8]="Int4",t[t.Uint=9]="Uint",t[t.Uint2=10]="Uint2",t[t.Uint3=11]="Uint3",t[t.Uint4=12]="Uint4",t[t.Short=13]="Short",t[t.Short2=14]="Short2",t[t.Short3=15]="Short3",t[t.Short4=16]="Short4",t[t.Ushort=17]="Ushort",t[t.Ushort2=18]="Ushort2",t[t.Ushort3=19]="Ushort3",t[t.Ushort4=20]="Ushort4",t[t.Char=21]="Char",t[t.Char2=22]="Char2",t[t.Char3=23]="Char3",t[t.Char4=24]="Char4",t[t.Uchar=25]="Uchar",t[t.Uchar2=26]="Uchar2",t[t.Uchar3=27]="Uchar3",t[t.Uchar4=28]="Uchar4",t[t.Half=29]="Half",t[t.Half2=30]="Half2",t[t.Half3=31]="Half3",t[t.Half4=32]="Half4",t[t.Float3x3=33]="Float3x3",t[t.Float3x4=34]="Float3x4",t[t.Float4x4=35]="Float4x4",t[t.Texture2D=240]="Texture2D",t[t.Texture3D=241]="Texture3D",t[t.TextureCube=242]="TextureCube",t[t.Short_Norm=256]="Short_Norm",t[t.Short2_Norm=257]="Short2_Norm",t[t.Short3_Norm=258]="Short3_Norm",t[t.Short4_Norm=259]="Short4_Norm",t[t.Ushort_Norm=260]="Ushort_Norm",t[t.Ushort2_Norm=261]="Ushort2_Norm",t[t.Ushort3_Norm=262]="Ushort3_Norm",t[t.Ushort4_Norm=263]="Ushort4_Norm",t[t.Char_Norm=264]="Char_Norm",t[t.Char2_Norm=265]="Char2_Norm",t[t.Char3_Norm=266]="Char3_Norm",t[t.Char4_Norm=267]="Char4_Norm",t[t.Uchar_Norm=268]="Uchar_Norm",t[t.Uchar2_Norm=269]="Uchar2_Norm",t[t.Uchar3_Norm=270]="Uchar3_Norm",t[t.Uchar4_Norm=271]="Uchar4_Norm"}(s||(s={})),function(t){t[t.Texture2D=240]="Texture2D",t[t.Texture3D=241]="Texture3D",t[t.TextureCube=242]="TextureCube"}(c||(c={})),function(t){t[t.Undefined=0]="Undefined",t[t.U565=1]="U565",t[t.U8=2]="U8",t[t.U8_sRGB=3]="U8_sRGB",t[t.U8x2=4]="U8x2",t[t.U8x2_sRGB=5]="U8x2_sRGB",t[t.U8x3=6]="U8x3",t[t.U8x3_sRGB=7]="U8x3_sRGB",t[t.U8x4=8]="U8x4",t[t.U8x4_sRGB=9]="U8x4_sRGB",t[t.U10_10_10_2=10]="U10_10_10_2",t[t.F11_11_10=11]="F11_11_10",t[t.F16=12]="F16",t[t.F16x2=13]="F16x2",t[t.F16x3=14]="F16x3",t[t.F16x4=15]="F16x4",t[t.F32x2=16]="F32x2",t[t.F32x3=17]="F32x3",t[t.F32x4=18]="F32x4",t[t.Depth32=19]="Depth32",t[t.Depth24Stencil8=20]="Depth24Stencil8"}(f||(f={})),function(t){t[t.Nearest=0]="Nearest",t[t.Linear=1]="Linear"}(h||(h={})),function(t){t[t.Never=0]="Never",t[t.Less=1]="Less",t[t.Equal=2]="Equal",t[t.LessEqual=3]="LessEqual",t[t.Greater=4]="Greater",t[t.NotEqual=5]="NotEqual",t[t.GreaterEqual=6]="GreaterEqual",t[t.Always=7]="Always"}(l||(l={})),function(t){t[t.Points=0]="Points",t[t.Lines=1]="Lines",t[t.LineLoop=2]="LineLoop",t[t.LineStrip=3]="LineStrip",t[t.Triangles=4]="Triangles",t[t.TriangleStrip=5]="TriangleStrip",t[t.TriangleFan=6]="TriangleFan"}(d||(d={})),function(t){t[t.Undefined=0]="Undefined",t[t.Uniform=1]="Uniform",t[t.Vertex=2]="Vertex",t[t.Index=3]="Index",t[t.Readback=4]="Readback"}(m||(m={})),function(t){t[t.Undefined=0]="Undefined",t[t.UniformBuffer=1]="UniformBuffer",t[t.Texture=2]="Texture"}(M||(M={})),function(t){t[t.None=0]="None",t[t.Static=1]="Static",t[t.Dynamic=2]="Dynamic"}(p||(p={})),function(t){t[t.None=0]="None",t[t.Back=1]="Back",t[t.Front=2]="Front"}(b||(b={})),function(t){t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Source=2]="Source",t[t.OneMinusSource=3]="OneMinusSource"}(x||(x={})),function(t){t[t.Vertex=0]="Vertex",t[t.Instance=1]="Instance"}(g||(g={}));var U="undefined"!=typeof Float32Array?Float32Array:Array,S=Math.random;Math.PI;function _(){var t=new U(16);return U!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function F(t){var n=new U(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function A(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function D(t,n,r,e,a,o,i,u,s,c,f,h,l,d,m,M){var p=new U(16);return p[0]=t,p[1]=n,p[2]=r,p[3]=e,p[4]=a,p[5]=o,p[6]=i,p[7]=u,p[8]=s,p[9]=c,p[10]=f,p[11]=h,p[12]=l,p[13]=d,p[14]=m,p[15]=M,p}function N(t,n,r,e,a,o,i,u,s,c,f,h,l,d,m,M,p){return t[0]=n,t[1]=r,t[2]=e,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t[9]=f,t[10]=h,t[11]=l,t[12]=d,t[13]=m,t[14]=M,t[15]=p,t}function L(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I(t,n){if(t===n){var r=n[1],e=n[2],a=n[3],o=n[6],i=n[7],u=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=r,t[6]=n[9],t[7]=n[13],t[8]=e,t[9]=o,t[11]=n[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}function O(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=n[6],c=n[7],f=n[8],h=n[9],l=n[10],d=n[11],m=n[12],M=n[13],p=n[14],b=n[15],x=r*u-e*i,g=r*s-a*i,y=r*c-o*i,v=e*s-a*u,w=e*c-o*u,T=a*c-o*s,U=f*M-h*m,S=f*p-l*m,_=f*b-d*m,F=h*p-l*M,A=h*b-d*M,D=l*b-d*p,N=x*D-g*A+y*F+v*_-w*S+T*U;return N?(N=1/N,t[0]=(u*D-s*A+c*F)*N,t[1]=(a*A-e*D-o*F)*N,t[2]=(M*T-p*w+b*v)*N,t[3]=(l*w-h*T-d*v)*N,t[4]=(s*_-i*D-c*S)*N,t[5]=(r*D-a*_+o*S)*N,t[6]=(p*y-m*T-b*g)*N,t[7]=(f*T-l*y+d*g)*N,t[8]=(i*A-u*_+c*U)*N,t[9]=(e*_-r*A-o*U)*N,t[10]=(m*w-M*y+b*x)*N,t[11]=(h*y-f*w-d*x)*N,t[12]=(u*S-i*F-s*U)*N,t[13]=(r*F-e*S+a*U)*N,t[14]=(M*g-m*v-p*x)*N,t[15]=(f*v-h*g+l*x)*N,t):null}function E(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=n[6],c=n[7],f=n[8],h=n[9],l=n[10],d=n[11],m=n[12],M=n[13],p=n[14],b=n[15];return t[0]=u*(l*b-d*p)-h*(s*b-c*p)+M*(s*d-c*l),t[1]=-(e*(l*b-d*p)-h*(a*b-o*p)+M*(a*d-o*l)),t[2]=e*(s*b-c*p)-u*(a*b-o*p)+M*(a*c-o*s),t[3]=-(e*(s*d-c*l)-u*(a*d-o*l)+h*(a*c-o*s)),t[4]=-(i*(l*b-d*p)-f*(s*b-c*p)+m*(s*d-c*l)),t[5]=r*(l*b-d*p)-f*(a*b-o*p)+m*(a*d-o*l),t[6]=-(r*(s*b-c*p)-i*(a*b-o*p)+m*(a*c-o*s)),t[7]=r*(s*d-c*l)-i*(a*d-o*l)+f*(a*c-o*s),t[8]=i*(h*b-d*M)-f*(u*b-c*M)+m*(u*d-c*h),t[9]=-(r*(h*b-d*M)-f*(e*b-o*M)+m*(e*d-o*h)),t[10]=r*(u*b-c*M)-i*(e*b-o*M)+m*(e*c-o*u),t[11]=-(r*(u*d-c*h)-i*(e*d-o*h)+f*(e*c-o*u)),t[12]=-(i*(h*p-l*M)-f*(u*p-s*M)+m*(u*l-s*h)),t[13]=r*(h*p-l*M)-f*(e*p-a*M)+m*(e*l-a*h),t[14]=-(r*(u*p-s*M)-i*(e*p-a*M)+m*(e*s-a*u)),t[15]=r*(u*l-s*h)-i*(e*l-a*h)+f*(e*s-a*u),t}function V(t){var n=t[0],r=t[1],e=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],c=t[8],f=t[9],h=t[10],l=t[11],d=t[12],m=t[13],M=t[14],p=t[15];return(n*i-r*o)*(h*p-l*M)-(n*u-e*o)*(f*p-l*m)+(n*s-a*o)*(f*M-h*m)+(r*u-e*i)*(c*p-l*d)-(r*s-a*i)*(c*M-h*d)+(e*s-a*u)*(c*m-f*d)}function B(t,n,r){var e=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],c=n[6],f=n[7],h=n[8],l=n[9],d=n[10],m=n[11],M=n[12],p=n[13],b=n[14],x=n[15],g=r[0],y=r[1],v=r[2],w=r[3];return t[0]=g*e+y*u+v*h+w*M,t[1]=g*a+y*s+v*l+w*p,t[2]=g*o+y*c+v*d+w*b,t[3]=g*i+y*f+v*m+w*x,g=r[4],y=r[5],v=r[6],w=r[7],t[4]=g*e+y*u+v*h+w*M,t[5]=g*a+y*s+v*l+w*p,t[6]=g*o+y*c+v*d+w*b,t[7]=g*i+y*f+v*m+w*x,g=r[8],y=r[9],v=r[10],w=r[11],t[8]=g*e+y*u+v*h+w*M,t[9]=g*a+y*s+v*l+w*p,t[10]=g*o+y*c+v*d+w*b,t[11]=g*i+y*f+v*m+w*x,g=r[12],y=r[13],v=r[14],w=r[15],t[12]=g*e+y*u+v*h+w*M,t[13]=g*a+y*s+v*l+w*p,t[14]=g*o+y*c+v*d+w*b,t[15]=g*i+y*f+v*m+w*x,t}function C(t,n,r){var e,a,o,i,u,s,c,f,h,l,d,m,M=r[0],p=r[1],b=r[2];return n===t?(t[12]=n[0]*M+n[4]*p+n[8]*b+n[12],t[13]=n[1]*M+n[5]*p+n[9]*b+n[13],t[14]=n[2]*M+n[6]*p+n[10]*b+n[14],t[15]=n[3]*M+n[7]*p+n[11]*b+n[15]):(e=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],c=n[6],f=n[7],h=n[8],l=n[9],d=n[10],m=n[11],t[0]=e,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=s,t[6]=c,t[7]=f,t[8]=h,t[9]=l,t[10]=d,t[11]=m,t[12]=e*M+u*p+h*b+n[12],t[13]=a*M+s*p+l*b+n[13],t[14]=o*M+c*p+d*b+n[14],t[15]=i*M+f*p+m*b+n[15]),t}function R(t,n,r){var e=r[0],a=r[1],o=r[2];return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=n[7]*a,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function q(t,n,r,e){var a,o,i,u,s,c,f,h,l,d,m,M,p,b,x,g,y,v,w,T,U,S,_,F,A=e[0],D=e[1],N=e[2],L=Math.hypot(A,D,N);return L<1e-6?null:(A*=L=1/L,D*=L,N*=L,a=Math.sin(r),i=1-(o=Math.cos(r)),u=n[0],s=n[1],c=n[2],f=n[3],h=n[4],l=n[5],d=n[6],m=n[7],M=n[8],p=n[9],b=n[10],x=n[11],g=A*A*i+o,y=D*A*i+N*a,v=N*A*i-D*a,w=A*D*i-N*a,T=D*D*i+o,U=N*D*i+A*a,S=A*N*i+D*a,_=D*N*i-A*a,F=N*N*i+o,t[0]=u*g+h*y+M*v,t[1]=s*g+l*y+p*v,t[2]=c*g+d*y+b*v,t[3]=f*g+m*y+x*v,t[4]=u*w+h*T+M*U,t[5]=s*w+l*T+p*U,t[6]=c*w+d*T+b*U,t[7]=f*w+m*T+x*U,t[8]=u*S+h*_+M*F,t[9]=s*S+l*_+p*F,t[10]=c*S+d*_+b*F,t[11]=f*S+m*_+x*F,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}function k(t,n,r){var e=Math.sin(r),a=Math.cos(r),o=n[4],i=n[5],u=n[6],s=n[7],c=n[8],f=n[9],h=n[10],l=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=o*a+c*e,t[5]=i*a+f*e,t[6]=u*a+h*e,t[7]=s*a+l*e,t[8]=c*a-o*e,t[9]=f*a-i*e,t[10]=h*a-u*e,t[11]=l*a-s*e,t}function P(t,n,r){var e=Math.sin(r),a=Math.cos(r),o=n[0],i=n[1],u=n[2],s=n[3],c=n[8],f=n[9],h=n[10],l=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a-c*e,t[1]=i*a-f*e,t[2]=u*a-h*e,t[3]=s*a-l*e,t[8]=o*e+c*a,t[9]=i*e+f*a,t[10]=u*e+h*a,t[11]=s*e+l*a,t}function j(t,n,r){var e=Math.sin(r),a=Math.cos(r),o=n[0],i=n[1],u=n[2],s=n[3],c=n[4],f=n[5],h=n[6],l=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a+c*e,t[1]=i*a+f*e,t[2]=u*a+h*e,t[3]=s*a+l*e,t[4]=c*a-o*e,t[5]=f*a-i*e,t[6]=h*a-u*e,t[7]=l*a-s*e,t}function H(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function W(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function G(t,n,r){var e,a,o,i=r[0],u=r[1],s=r[2],c=Math.hypot(i,u,s);return c<1e-6?null:(i*=c=1/c,u*=c,s*=c,e=Math.sin(n),o=1-(a=Math.cos(n)),t[0]=i*i*o+a,t[1]=u*i*o+s*e,t[2]=s*i*o-u*e,t[3]=0,t[4]=i*u*o-s*e,t[5]=u*u*o+a,t[6]=s*u*o+i*e,t[7]=0,t[8]=i*s*o+u*e,t[9]=u*s*o-i*e,t[10]=s*s*o+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function X(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Z(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function $(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function z(t,n,r){var e=n[0],a=n[1],o=n[2],i=n[3],u=e+e,s=a+a,c=o+o,f=e*u,h=e*s,l=e*c,d=a*s,m=a*c,M=o*c,p=i*u,b=i*s,x=i*c;return t[0]=1-(d+M),t[1]=h+x,t[2]=l-b,t[3]=0,t[4]=h-x,t[5]=1-(f+M),t[6]=m+p,t[7]=0,t[8]=l+b,t[9]=m-p,t[10]=1-(f+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function J(t,n){var r=new U(3),e=-n[0],a=-n[1],o=-n[2],i=n[3],u=n[4],s=n[5],c=n[6],f=n[7],h=e*e+a*a+o*o+i*i;return h>0?(r[0]=2*(u*i+f*e+s*o-c*a)/h,r[1]=2*(s*i+f*a+c*e-u*o)/h,r[2]=2*(c*i+f*o+u*a-s*e)/h):(r[0]=2*(u*i+f*e+s*o-c*a),r[1]=2*(s*i+f*a+c*e-u*o),r[2]=2*(c*i+f*o+u*a-s*e)),z(t,n,r),t}function Y(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function Q(t,n){var r=n[0],e=n[1],a=n[2],o=n[4],i=n[5],u=n[6],s=n[8],c=n[9],f=n[10];return t[0]=Math.hypot(r,e,a),t[1]=Math.hypot(o,i,u),t[2]=Math.hypot(s,c,f),t}function K(t,n){var r=new U(3);Q(r,n);var e=1/r[0],a=1/r[1],o=1/r[2],i=n[0]*e,u=n[1]*a,s=n[2]*o,c=n[4]*e,f=n[5]*a,h=n[6]*o,l=n[8]*e,d=n[9]*a,m=n[10]*o,M=i+f+m,p=0;return M>0?(p=2*Math.sqrt(M+1),t[3]=.25*p,t[0]=(h-d)/p,t[1]=(l-s)/p,t[2]=(u-c)/p):i>f&&i>m?(p=2*Math.sqrt(1+i-f-m),t[3]=(h-d)/p,t[0]=.25*p,t[1]=(u+c)/p,t[2]=(l+s)/p):f>m?(p=2*Math.sqrt(1+f-i-m),t[3]=(l-s)/p,t[0]=(u+c)/p,t[1]=.25*p,t[2]=(h+d)/p):(p=2*Math.sqrt(1+m-i-f),t[3]=(u-c)/p,t[0]=(l+s)/p,t[1]=(h+d)/p,t[2]=.25*p),t}function tt(t,n,r,e){var a=n[0],o=n[1],i=n[2],u=n[3],s=a+a,c=o+o,f=i+i,h=a*s,l=a*c,d=a*f,m=o*c,M=o*f,p=i*f,b=u*s,x=u*c,g=u*f,y=e[0],v=e[1],w=e[2];return t[0]=(1-(m+p))*y,t[1]=(l+g)*y,t[2]=(d-x)*y,t[3]=0,t[4]=(l-g)*v,t[5]=(1-(h+p))*v,t[6]=(M+b)*v,t[7]=0,t[8]=(d+x)*w,t[9]=(M-b)*w,t[10]=(1-(h+m))*w,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function nt(t,n,r,e,a){var o=n[0],i=n[1],u=n[2],s=n[3],c=o+o,f=i+i,h=u+u,l=o*c,d=o*f,m=o*h,M=i*f,p=i*h,b=u*h,x=s*c,g=s*f,y=s*h,v=e[0],w=e[1],T=e[2],U=a[0],S=a[1],_=a[2],F=(1-(M+b))*v,A=(d+y)*v,D=(m-g)*v,N=(d-y)*w,L=(1-(l+b))*w,I=(p+x)*w,O=(m+g)*T,E=(p-x)*T,V=(1-(l+M))*T;return t[0]=F,t[1]=A,t[2]=D,t[3]=0,t[4]=N,t[5]=L,t[6]=I,t[7]=0,t[8]=O,t[9]=E,t[10]=V,t[11]=0,t[12]=r[0]+U-(F*U+N*S+O*_),t[13]=r[1]+S-(A*U+L*S+E*_),t[14]=r[2]+_-(D*U+I*S+V*_),t[15]=1,t}function rt(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],i=r+r,u=e+e,s=a+a,c=r*i,f=e*i,h=e*u,l=a*i,d=a*u,m=a*s,M=o*i,p=o*u,b=o*s;return t[0]=1-h-m,t[1]=f+b,t[2]=l-p,t[3]=0,t[4]=f-b,t[5]=1-c-m,t[6]=d+M,t[7]=0,t[8]=l+p,t[9]=d-M,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function et(t,n,r,e,a,o,i){var u=1/(r-n),s=1/(a-e),c=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(r+n)*u,t[9]=(a+e)*s,t[10]=(i+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*c,t[15]=0,t}function at(t,n,r,e,a){var o,i=1/Math.tan(n/2);return t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(o=1/(e-a),t[10]=(a+e)*o,t[14]=2*a*e*o):(t[10]=-1,t[14]=-2*e),t}function ot(t,n,r,e){var a=Math.tan(n.upDegrees*Math.PI/180),o=Math.tan(n.downDegrees*Math.PI/180),i=Math.tan(n.leftDegrees*Math.PI/180),u=Math.tan(n.rightDegrees*Math.PI/180),s=2/(i+u),c=2/(a+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(i-u)*s*.5,t[9]=(a-o)*c*.5,t[10]=e/(r-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*r/(r-e),t[15]=0,t}function it(t,n,r,e,a,o,i){var u=1/(n-r),s=1/(e-a),c=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(n+r)*u,t[13]=(a+e)*s,t[14]=(i+o)*c,t[15]=1,t}function ut(t,n,r,e){var a,o,i,u,s,c,f,h,l,d,m=n[0],M=n[1],p=n[2],b=e[0],x=e[1],g=e[2],y=r[0],v=r[1],w=r[2];return Math.abs(m-y)<1e-6&&Math.abs(M-v)<1e-6&&Math.abs(p-w)<1e-6?L(t):(f=m-y,h=M-v,l=p-w,a=x*(l*=d=1/Math.hypot(f,h,l))-g*(h*=d),o=g*(f*=d)-b*l,i=b*h-x*f,(d=Math.hypot(a,o,i))?(a*=d=1/d,o*=d,i*=d):(a=0,o=0,i=0),u=h*i-l*o,s=l*a-f*i,c=f*o-h*a,(d=Math.hypot(u,s,c))?(u*=d=1/d,s*=d,c*=d):(u=0,s=0,c=0),t[0]=a,t[1]=u,t[2]=f,t[3]=0,t[4]=o,t[5]=s,t[6]=h,t[7]=0,t[8]=i,t[9]=c,t[10]=l,t[11]=0,t[12]=-(a*m+o*M+i*p),t[13]=-(u*m+s*M+c*p),t[14]=-(f*m+h*M+l*p),t[15]=1,t)}function st(t,n,r,e){var a=n[0],o=n[1],i=n[2],u=e[0],s=e[1],c=e[2],f=a-r[0],h=o-r[1],l=i-r[2],d=f*f+h*h+l*l;d>0&&(f*=d=1/Math.sqrt(d),h*=d,l*=d);var m=s*l-c*h,M=c*f-u*l,p=u*h-s*f;return(d=m*m+M*M+p*p)>0&&(m*=d=1/Math.sqrt(d),M*=d,p*=d),t[0]=m,t[1]=M,t[2]=p,t[3]=0,t[4]=h*p-l*M,t[5]=l*m-f*p,t[6]=f*M-h*m,t[7]=0,t[8]=f,t[9]=h,t[10]=l,t[11]=0,t[12]=a,t[13]=o,t[14]=i,t[15]=1,t}function ct(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function ft(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function ht(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t[8]=n[8]+r[8],t[9]=n[9]+r[9],t[10]=n[10]+r[10],t[11]=n[11]+r[11],t[12]=n[12]+r[12],t[13]=n[13]+r[13],t[14]=n[14]+r[14],t[15]=n[15]+r[15],t}function lt(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t[6]=n[6]-r[6],t[7]=n[7]-r[7],t[8]=n[8]-r[8],t[9]=n[9]-r[9],t[10]=n[10]-r[10],t[11]=n[11]-r[11],t[12]=n[12]-r[12],t[13]=n[13]-r[13],t[14]=n[14]-r[14],t[15]=n[15]-r[15],t}function dt(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*r,t[9]=n[9]*r,t[10]=n[10]*r,t[11]=n[11]*r,t[12]=n[12]*r,t[13]=n[13]*r,t[14]=n[14]*r,t[15]=n[15]*r,t}function mt(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t[6]=n[6]+r[6]*e,t[7]=n[7]+r[7]*e,t[8]=n[8]+r[8]*e,t[9]=n[9]+r[9]*e,t[10]=n[10]+r[10]*e,t[11]=n[11]+r[11]*e,t[12]=n[12]+r[12]*e,t[13]=n[13]+r[13]*e,t[14]=n[14]+r[14]*e,t[15]=n[15]+r[15]*e,t}function Mt(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]}function pt(t,n){var r=t[0],e=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=t[8],h=t[9],l=t[10],d=t[11],m=t[12],M=t[13],p=t[14],b=t[15],x=n[0],g=n[1],y=n[2],v=n[3],w=n[4],T=n[5],U=n[6],S=n[7],_=n[8],F=n[9],A=n[10],D=n[11],N=n[12],L=n[13],I=n[14],O=n[15];return Math.abs(r-x)<=1e-6*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(e-g)<=1e-6*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(a-y)<=1e-6*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(o-v)<=1e-6*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(i-w)<=1e-6*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(u-T)<=1e-6*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(s-U)<=1e-6*Math.max(1,Math.abs(s),Math.abs(U))&&Math.abs(c-S)<=1e-6*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(f-_)<=1e-6*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(h-F)<=1e-6*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(l-A)<=1e-6*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(d-D)<=1e-6*Math.max(1,Math.abs(d),Math.abs(D))&&Math.abs(m-N)<=1e-6*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(M-L)<=1e-6*Math.max(1,Math.abs(M),Math.abs(L))&&Math.abs(p-I)<=1e-6*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(b-O)<=1e-6*Math.max(1,Math.abs(b),Math.abs(O))}Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});var bt=B,xt=lt;function gt(){var t=new U(3);return U!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function yt(t){var n=new U(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function vt(t){var n=t[0],r=t[1],e=t[2];return Math.hypot(n,r,e)}function wt(t,n,r){var e=new U(3);return e[0]=t,e[1]=n,e[2]=r,e}function Tt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function Ut(t,n,r,e){return t[0]=n,t[1]=r,t[2]=e,t}function St(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t}function _t(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t}function Ft(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t}function At(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t}function Dt(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t}function Nt(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t}function Lt(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t}function It(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t}function Ot(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t}function Et(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t}function Vt(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t}function Bt(t,n){var r=n[0]-t[0],e=n[1]-t[1],a=n[2]-t[2];return Math.hypot(r,e,a)}function Ct(t,n){var r=n[0]-t[0],e=n[1]-t[1],a=n[2]-t[2];return r*r+e*e+a*a}function Rt(t){var n=t[0],r=t[1],e=t[2];return n*n+r*r+e*e}function qt(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function kt(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t}function Pt(t,n){var r=n[0],e=n[1],a=n[2],o=r*r+e*e+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o,t}function jt(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Ht(t,n,r){var e=n[0],a=n[1],o=n[2],i=r[0],u=r[1],s=r[2];return t[0]=a*s-o*u,t[1]=o*i-e*s,t[2]=e*u-a*i,t}function Wt(t,n,r,e){var a=n[0],o=n[1],i=n[2];return t[0]=a+e*(r[0]-a),t[1]=o+e*(r[1]-o),t[2]=i+e*(r[2]-i),t}function Gt(t,n,r,e,a,o){var i=o*o,u=i*(2*o-3)+1,s=i*(o-2)+o,c=i*(o-1),f=i*(3-2*o);return t[0]=n[0]*u+r[0]*s+e[0]*c+a[0]*f,t[1]=n[1]*u+r[1]*s+e[1]*c+a[1]*f,t[2]=n[2]*u+r[2]*s+e[2]*c+a[2]*f,t}function Xt(t,n,r,e,a,o){var i=1-o,u=i*i,s=o*o,c=u*i,f=3*o*u,h=3*s*i,l=s*o;return t[0]=n[0]*c+r[0]*f+e[0]*h+a[0]*l,t[1]=n[1]*c+r[1]*f+e[1]*h+a[1]*l,t[2]=n[2]*c+r[2]*f+e[2]*h+a[2]*l,t}function Zt(t,n){n=n||1;var r=2*S()*Math.PI,e=2*S()-1,a=Math.sqrt(1-e*e)*n;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t[2]=e*n,t}function $t(t,n,r){var e=n[0],a=n[1],o=n[2],i=r[3]*e+r[7]*a+r[11]*o+r[15];return i=i||1,t[0]=(r[0]*e+r[4]*a+r[8]*o+r[12])/i,t[1]=(r[1]*e+r[5]*a+r[9]*o+r[13])/i,t[2]=(r[2]*e+r[6]*a+r[10]*o+r[14])/i,t}function zt(t,n,r){var e=n[0],a=n[1],o=n[2];return t[0]=e*r[0]+a*r[3]+o*r[6],t[1]=e*r[1]+a*r[4]+o*r[7],t[2]=e*r[2]+a*r[5]+o*r[8],t}function Jt(t,n,r){var e=r[0],a=r[1],o=r[2],i=r[3],u=n[0],s=n[1],c=n[2],f=a*c-o*s,h=o*u-e*c,l=e*s-a*u,d=a*l-o*h,m=o*f-e*l,M=e*h-a*f,p=2*i;return f*=p,h*=p,l*=p,d*=2,m*=2,M*=2,t[0]=u+f+d,t[1]=s+h+m,t[2]=c+l+M,t}function Yt(t,n,r,e){var a=[],o=[];return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],o[0]=a[0],o[1]=a[1]*Math.cos(e)-a[2]*Math.sin(e),o[2]=a[1]*Math.sin(e)+a[2]*Math.cos(e),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function Qt(t,n,r,e){var a=[],o=[];return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],o[0]=a[2]*Math.sin(e)+a[0]*Math.cos(e),o[1]=a[1],o[2]=a[2]*Math.cos(e)-a[0]*Math.sin(e),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function Kt(t,n,r,e){var a=[],o=[];return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],o[0]=a[0]*Math.cos(e)-a[1]*Math.sin(e),o[1]=a[0]*Math.sin(e)+a[1]*Math.cos(e),o[2]=a[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function tn(t,n){var r=t[0],e=t[1],a=t[2],o=n[0],i=n[1],u=n[2],s=Math.sqrt(r*r+e*e+a*a)*Math.sqrt(o*o+i*i+u*u),c=s&&jt(t,n)/s;return Math.acos(Math.min(Math.max(c,-1),1))}function nn(t){return t[0]=0,t[1]=0,t[2]=0,t}function rn(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function en(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}function an(t,n){var r=t[0],e=t[1],a=t[2],o=n[0],i=n[1],u=n[2];return Math.abs(r-o)<=1e-6*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(e-i)<=1e-6*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(a-u)<=1e-6*Math.max(1,Math.abs(a),Math.abs(u))}var on,un=_t,sn=Ft,cn=At,fn=Bt,hn=Ct,ln=vt,dn=Rt,mn=(on=gt(),function(t,n,r,e,a,o){var i,u;for(n||(n=3),r||(r=0),u=e?Math.min(e*n+r,t.length):t.length,i=r;i<u;i+=n)on[0]=t[i],on[1]=t[i+1],on[2]=t[i+2],a(on,on,o),t[i]=on[0],t[i+1]=on[1],t[i+2]=on[2];return t});function Mn(t){var n=t[0],r=t[1],e=t[2],a=t[3];return Math.hypot(n,r,e,a)}function pn(t){var n=t[0],r=t[1],e=t[2],a=t[3];return n*n+r*r+e*e+a*a}!function(){var t,n=(t=new U(4),U!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t)}();function bn(){var t=new U(4);return U!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function xn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function gn(t,n,r){r*=.5;var e=Math.sin(r);return t[0]=e*n[0],t[1]=e*n[1],t[2]=e*n[2],t[3]=Math.cos(r),t}function yn(t,n){var r=2*Math.acos(n[3]),e=Math.sin(r/2);return e>1e-6?(t[0]=n[0]/e,t[1]=n[1]/e,t[2]=n[2]/e):(t[0]=1,t[1]=0,t[2]=0),r}function vn(t,n){var r=Yn(t,n);return Math.acos(2*r*r-1)}function wn(t,n,r){var e=n[0],a=n[1],o=n[2],i=n[3],u=r[0],s=r[1],c=r[2],f=r[3];return t[0]=e*f+i*u+a*c-o*s,t[1]=a*f+i*s+o*u-e*c,t[2]=o*f+i*c+e*s-a*u,t[3]=i*f-e*u-a*s-o*c,t}function Tn(t,n,r){r*=.5;var e=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(r),s=Math.cos(r);return t[0]=e*s+i*u,t[1]=a*s+o*u,t[2]=o*s-a*u,t[3]=i*s-e*u,t}function Un(t,n,r){r*=.5;var e=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(r),s=Math.cos(r);return t[0]=e*s-o*u,t[1]=a*s+i*u,t[2]=o*s+e*u,t[3]=i*s-a*u,t}function Sn(t,n,r){r*=.5;var e=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(r),s=Math.cos(r);return t[0]=e*s+a*u,t[1]=a*s-e*u,t[2]=o*s+i*u,t[3]=i*s-o*u,t}function _n(t,n){var r=n[0],e=n[1],a=n[2];return t[0]=r,t[1]=e,t[2]=a,t[3]=Math.sqrt(Math.abs(1-r*r-e*e-a*a)),t}function Fn(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],i=Math.sqrt(r*r+e*e+a*a),u=Math.exp(o),s=i>0?u*Math.sin(i)/i:0;return t[0]=r*s,t[1]=e*s,t[2]=a*s,t[3]=u*Math.cos(i),t}function An(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],i=Math.sqrt(r*r+e*e+a*a),u=i>0?Math.atan2(i,o)/i:0;return t[0]=r*u,t[1]=e*u,t[2]=a*u,t[3]=.5*Math.log(r*r+e*e+a*a+o*o),t}function Dn(t,n,r){return An(t,n),Jn(t,t,r),Fn(t,t),t}function Nn(t,n,r,e){var a,o,i,u,s,c=n[0],f=n[1],h=n[2],l=n[3],d=r[0],m=r[1],M=r[2],p=r[3];return(o=c*d+f*m+h*M+l*p)<0&&(o=-o,d=-d,m=-m,M=-M,p=-p),1-o>1e-6?(a=Math.acos(o),i=Math.sin(a),u=Math.sin((1-e)*a)/i,s=Math.sin(e*a)/i):(u=1-e,s=e),t[0]=u*c+s*d,t[1]=u*f+s*m,t[2]=u*h+s*M,t[3]=u*l+s*p,t}function Ln(t){var n=S(),r=S(),e=S(),a=Math.sqrt(1-n),o=Math.sqrt(n);return t[0]=a*Math.sin(2*Math.PI*r),t[1]=a*Math.cos(2*Math.PI*r),t[2]=o*Math.sin(2*Math.PI*e),t[3]=o*Math.cos(2*Math.PI*e),t}function In(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],i=r*r+e*e+a*a+o*o,u=i?1/i:0;return t[0]=-r*u,t[1]=-e*u,t[2]=-a*u,t[3]=o*u,t}function On(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t}function En(t,n){var r,e=n[0]+n[4]+n[8];if(e>0)r=Math.sqrt(e+1),t[3]=.5*r,r=.5/r,t[0]=(n[5]-n[7])*r,t[1]=(n[6]-n[2])*r,t[2]=(n[1]-n[3])*r;else{var a=0;n[4]>n[0]&&(a=1),n[8]>n[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;r=Math.sqrt(n[3*a+a]-n[3*o+o]-n[3*i+i]+1),t[a]=.5*r,r=.5/r,t[3]=(n[3*o+i]-n[3*i+o])*r,t[o]=(n[3*o+a]+n[3*a+o])*r,t[i]=(n[3*i+a]+n[3*a+i])*r}return t}function Vn(t,n,r,e){var a=.5*Math.PI/180;n*=a,r*=a,e*=a;var o=Math.sin(n),i=Math.cos(n),u=Math.sin(r),s=Math.cos(r),c=Math.sin(e),f=Math.cos(e);return t[0]=o*s*f-i*u*c,t[1]=i*u*f+o*s*c,t[2]=i*s*c-o*u*f,t[3]=i*s*f+o*u*c,t}function Bn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Cn,Rn,qn,kn,Pn,jn,Hn,Wn=function(t){var n=new U(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},Gn=function(t,n,r,e){var a=new U(4);return a[0]=t,a[1]=n,a[2]=r,a[3]=e,a},Xn=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},Zn=function(t,n,r,e,a){return t[0]=n,t[1]=r,t[2]=e,t[3]=a,t},$n=function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t},zn=wn,Jn=function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t},Yn=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]},Qn=function(t,n,r,e){var a=n[0],o=n[1],i=n[2],u=n[3];return t[0]=a+e*(r[0]-a),t[1]=o+e*(r[1]-o),t[2]=i+e*(r[2]-i),t[3]=u+e*(r[3]-u),t},Kn=Mn,tr=Kn,nr=pn,rr=nr,er=function(t,n){var r=n[0],e=n[1],a=n[2],o=n[3],i=r*r+e*e+a*a+o*o;return i>0&&(i=1/Math.sqrt(i)),t[0]=r*i,t[1]=e*i,t[2]=a*i,t[3]=o*i,t},ar=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},or=function(t,n){var r=t[0],e=t[1],a=t[2],o=t[3],i=n[0],u=n[1],s=n[2],c=n[3];return Math.abs(r-i)<=1e-6*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(e-u)<=1e-6*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(a-s)<=1e-6*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-c)<=1e-6*Math.max(1,Math.abs(o),Math.abs(c))},ir=(Cn=gt(),Rn=wt(1,0,0),qn=wt(0,1,0),function(t,n,r){var e=jt(n,r);return e<-.999999?(Ht(Cn,Rn,n),ln(Cn)<1e-6&&Ht(Cn,qn,n),Pt(Cn,Cn),gn(t,Cn,Math.PI),t):e>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(Ht(Cn,n,r),t[0]=Cn[0],t[1]=Cn[1],t[2]=Cn[2],t[3]=1+e,er(t,t))}),ur=(kn=bn(),Pn=bn(),function(t,n,r,e,a,o){return Nn(kn,n,a,o),Nn(Pn,r,e,o),Nn(t,kn,Pn,2*o*(1-o)),t}),sr=(jn=new U(9),U!=Float32Array&&(jn[1]=0,jn[2]=0,jn[3]=0,jn[5]=0,jn[6]=0,jn[7]=0),jn[0]=1,jn[4]=1,jn[8]=1,Hn=jn,function(t,n,r,e){return Hn[0]=r[0],Hn[3]=r[1],Hn[6]=r[2],Hn[1]=e[0],Hn[4]=e[1],Hn[7]=e[2],Hn[2]=-n[0],Hn[5]=-n[1],Hn[8]=-n[2],er(t,En(t,Hn))});e.create();class cr extends class{constructor(){this.matrixWorldDirty=!0,this.matrixDirty=!0,this.name="",this.position=a.create(),this.rotation=i.create(),this.scale=a.create(),this.matrix=e.create(),this.matrixWorld=e.create(),this.parent=null,this.children=[]}updateMatrix(){e.fromRotationTranslationScale(this.matrix,this.rotation,this.position,this.scale),this.matrixWorldDirty=!0}updateMatrixWorld(t,n){const r=this.parent;if(!0===t&&w(r)&&r.updateMatrixWorld(!0,!1),w(this.parent)?e.multiply(this.matrixWorld,this.parent.matrixWorld,this.matrix):e.copy(this.matrixWorld,this.matrix),!0===n){const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(!1,!0)}}add(t,...n){v(t),y(t!==this,"Object can't be added as a child of itself"),null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t);for(let t=0;t<n.length;t++)this.add(n[t]);return this}remove(t,...n){const r=this.children.indexOf(t);return-1!==r&&(t.parent=null,this.children.splice(r,1)),this}clone(t){return(new this.constructor).copy(this,t)}copy(t,n=!0){if(this.name=t.name,a.copy(this.position,t.position),i.copy(this.rotation,t.rotation),a.copy(this.scale,t.scale),this.matrix=e.copy(this.matrix,t.matrix),this.matrixWorld=e.copy(this.matrixWorld,t.matrixWorld),!0===n)for(var r=0;r<t.children.length;r++){const n=t.children[r];this.add(n.clone())}return this}}{constructor(t){super(),this.nodeId=t}copy(t){return this.name=t.name,this.nodeId=t.nodeId,a.copy(this.position,t.position),i.copy(this.rotation,t.rotation),a.copy(this.scale,t.scale),this.matrix=e.copy(this.matrix,t.matrix),this.matrixWorld=e.copy(this.matrixWorld,t.matrixWorld),this.children=[],this.parent=null,this}}const fr=1313821514,hr=5130562;let lr=new TextDecoder;function dr(t){return lr.decode(t)}class mr{constructor(t){const n=new DataView(t,0,12),r=new DataView(t,12),e=dr(new Uint8Array(t,0,4)),a=n.getUint32(4,!0);n.getUint32(8,!0);if("glTF"!==e)throw new Error("Unsupported glTF-Binary header.");if(a<2)throw new Error("Unsupported legacy binary file detected.");let o=0;for(;o<r.byteLength;){const n=r.getUint32(o,!0);o+=4;const e=r.getUint32(o,!0);switch(o+=4,e){case fr:{const r=new Uint8Array(t,12+o,n);this.json=dr(r)}break;case hr:{const r=12+o;this.binaryChunk=new Uint8Array(t,r,n)}break;default:console.warn("Skipping unexpected glTF-Binary chunk type:",e)}o+=n}y(!!this.json,"glTF-Binary: JSON content not found.")}}class Mr{constructor(t,n){this.gltf=t,this.bufferData=n}bufferViewData(t){if(!this.gltf.bufferViews)throw new Error("No buffer views found.");const n=this.gltf.bufferViews[t],r=v(this.bufferData[n.buffer],`No data for buffer ${n.buffer}`),e=n.byteLength||0,a=n.byteOffset||0,o=r.buffer,i=r.byteOffset;return new Uint8Array(o,i+a,e)}accessorData(t){if(!this.gltf.accessors)throw new Error("No accessors views found.");const n=this.gltf.accessors[t],r=gr[n.type];let e;const a=xr[n.componentType],o=a.BYTES_PER_ELEMENT*r*n.count;if(void 0!==n.bufferView){const t=this.bufferViewData(n.bufferView);e=new a(t.buffer,t.byteOffset+T(n.byteOffset,0),n.count*r)}else e=new a(o);if(n.sparse){const{count:t,indices:a,values:o}=n.sparse;let i=xr[a.componentType],u=this.bufferViewData(a.bufferView);const s=new i(u.buffer,u.byteOffset+(a.byteOffset||0),t);i=xr[n.componentType],u=this.bufferViewData(o.bufferView);const c=new i(this.bufferViewData(o.bufferView).buffer,u.byteOffset+(o.byteOffset||0),t*r);n.bufferView&&(e=new Uint8Array(e));const f=new xr[n.componentType](e.buffer);for(let n=0;n<t;n++)for(let t=0;t<r;t++)f[r*s[n]+t]=c[r*n+t]}return e}}function pr(t,n){let r;switch(n){case 5120:r=s.Char;break;case 5121:r=s.Uchar;break;case 5122:r=s.Short;break;case 5123:r=s.Ushort;break;case 5125:r=s.Uint;break;case 5126:r=s.Float;break;default:throw new Error("Invalid GLTF component type")}switch(t){case"SCALAR":r+=0;break;case"VEC2":r+=1;break;case"VEC3":r+=2;break;case"VEC4":r+=3;break;case"MAT2":throw new Error("2x2 Matrice not yet supported");case"MAT3":r=s.Float3x3;break;case"MAT4":r=s.Float4x4}return r}function br(t){switch(t){case 0:return d.Points;case 1:return d.Lines;case 2:return d.LineLoop;case 3:return d.LineStrip;case 4:return d.Triangles;case 5:return d.TriangleStrip;case 6:return d.TriangleFan;default:throw new Error("Invalid GLTF primitive mode")}}const xr={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},gr={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},yr={POSITION:"a_pos",NORMAL:"a_normal",TANGENT:"a_tangent",JOINTS_0:"a_joints",WEIGHTS_0:"a_weights",COLOR_0:"a_color",TEXCOORD_0:"a_uv0",TEXCOORD_1:"a_uv1",MORPH0_POSITION:"a_posMorph0"},vr={NORMAL:"HAS_NORMALS 1",TANGENT:"HAS_TANGENT 1",JOINTS_0:"HAS_JOINT_SET0 1",WEIGHTS_0:"HAS_WEIGHT_SET0 1",COLOR_0:"HAS_COLOR0 1",TEXCOORD_0:"HAS_UV_SET0 1",TEXCOORD_1:"HAS_UV_SET1 1"};function wr(t,n,r){const e=r,a=n.gltf;let o;if(!w(r.material))throw new Error("Default material not yet supported");o=v(t.materials[r.material]);const i=[];let u=void 0;const s=[];if(w(e.indices)){const r=v(a.accessors)[e.indices];u=Tr(t,n,v(r.bufferView),m.Index)}const c={buffers:[]},f={};for(let r in e.attributes){const o=v(a.accessors)[e.attributes[r]],u=v(o.bufferView,"Undefined accessor buffers are not yet implemented"),h=f[u];let l;if(w(h))l=c.buffers[h];else{f[u]=s.length;const r=Tr(t,n,u,m.Vertex);l={stride:T(v(a.bufferViews)[u].byteStride,0),layout:{}},s.push(r),c.buffers.push(l)}const d=vr[r];w(d)&&i.push(d),l.layout[yr[r]]={type:pr(o.type,o.componentType),offset:o.byteOffset||0}}if(e.targets){i.push("HAS_MORPH0 1"),y(1===e.targets.length,"Only 1 morph target is currently supported");const r=e.targets[0];for(let e in r)if("POSITION"===e){const o=v(a.accessors)[r[e]],i=v(o.bufferView,"Undefined accessor buffers are not yet implemented"),u=v(a.bufferViews)[i];let f=c.buffers[i];const h=Tr(t,n,i,m.Vertex);w(f)||(s[i]=h,f=c.buffers[i]={stride:T(u.byteStride,0),layout:{}}),f.layout[yr[`MORPH0_${e}`]]={type:pr(o.type,o.componentType),offset:o.byteOffset||0}}}const h=a.accessors[v(e.indices,"Only indexed primitives are currently supported")],l=v(u,"Only indexed primitives are currently supported");return{elementCount:h.count,vertexBuffers:s,type:br(T(e.mode,4)),indexType:pr(h.type,h.componentType),indexBuffer:l,vertexLayout:c,material:o}}function Tr(t,n,r,e){if(w(t.bufferViews[r]))return t.bufferViews[r];const a=v(n.gltf.bufferViews)[r].name||`buffer${r}`;t.bufferData[r]=new Uint8Array(n.bufferViewData(r)).buffer,t.transferList.push(t.bufferData[r]);const o={name:a,type:e,id:-1};return t.bufferViews[r]=o,o}const Ur=self,Sr={texture:new class{async loadAsync(t){const n=await fetch(t.source.uri);if(200!=n.status)throw new Error("Failed to download image");const r=t.source.uri.match(/.*\/(.+?)\./);t.name=r&&r.length>1?r[1]:"Unknown",self.createImageBitmap?(t.imageBitmap=await createImageBitmap(await n.blob()),t.transferList.push(t.imageBitmap),t.status=o.LoadingSync):(t.imageBuffer=await n.arrayBuffer(),t.transferList.push(t.imageBuffer),t.status=o.LoadingSync)}loadSync(t,n){if(n.imageBitmap)n.texture=t.renderer.createTexture(n.name,{usage:p.Static,type:c.Texture2D,format:f.U8x3,maxAnistropy:16},n.imageBitmap),n.imageBitmap.close(),delete n.imageBitmap,n.status=o.Loaded;else{if(n.imageBuffer){var r=new Blob([n.imageBuffer],{type:"image/jpeg"});let t=window.URL.createObjectURL(r);delete n.imageBuffer,n.imageElement=new Image,n.imageElement.src=t,n.status=o.LoadingSync}w(n.imageElement)&&n.imageElement.complete&&(n.texture=t.renderer.createTexture(n.name,{usage:p.Static,type:c.Texture2D,format:f.U8x3,maxAnistropy:16},n.imageElement),delete n.imageElement,n.status=o.Loaded)}}unloadSync(t,n){w(n.texture)&&t.renderer.removeTexture(n.texture),w(n.imageBitmap)&&n.imageBitmap.close()}},gltf:new class{async loadAsync(t){const n=await fetch(t.source.uri);if(200!=n.status)throw new Error("Failed to download GLTF");const r=await n.arrayBuffer(),u=new mr(r),s=JSON.parse(u.json),h=new Mr(s,[u.binaryChunk]);t.nodes=[],t.meshes=[],t.materials=[],t.textures=[],t.bufferViews=[],t.animations=[],t.rootNodeIds=[],t.imageData=[],t.bufferData=[];const l=function(t,n){const r=T(n.gltf.images,[]),e=[];t.textures=[],t.imageData=[];const a={type:c.Texture2D,format:f.U8x3,usage:p.Static};for(let o=0;o<r.length;o++){const i=v(r[o]),u=v(i.bufferView,"Image loading from a URI is not yet supported"),s=n.bufferViewData(u),c=i.name||`tex${o}`;let f;if(w(self.createImageBitmap)){const t=new Blob([s],{type:v(i.mimeType)});f=createImageBitmap(t)}else f=Promise.resolve(s.buffer);e.push(f.then(n=>{t.transferList.push(n),t.imageData[o]=n}));const h={name:c,index:o,id:-1,desc:a};t.textures[o]=h}return e}(t,h);!function(t,n){const r=T(n.gltf.materials,[]);t.materials=[];for(let n=0;n<r.length;n++){const e=v(r[n]),a={renderFormat:{blendingEnabled:!1},cullMode:e.doubleSided?b.None:b.Back,textures:{}},o={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1},i=T(e.pbrMetallicRoughness,o);if(i.baseColorTexture){y(0===T(i.baseColorTexture.texCoord,0),"Non-zero UV indices not yet supported");const n=v(t.textures[i.baseColorTexture.index]);a.textures.baseColorTexture=n}t.materials[n]=a}}(t,h),function(t,n){const r=T(n.gltf.meshes,[]);t.meshes=[];for(let e=0;e<r.length;e++){const a=v(r[e]),o=[];for(let r of a.primitives)o.push(wr(t,n,r));const i={name:a.name,id:e,primitives:o};t.meshes[e]=i}}(t,h),function(t,n){const r=T(n.gltf.nodes,[]);t.nodes=[];for(let o=0;o<r.length;o++){const u=v(r[o]),s=T(u.scale,[1,1,1]),c=T(u.rotation,[0,0,0,1]),f=T(u.translation,[0,0,0]),h={name:u.name,scale:a.fromValues(s[0],s[1],s[2]),rotation:i.fromValues(c[0],c[1],c[2],c[3]),translation:a.fromValues(f[0],f[1],f[2]),morphWeight:T(u.weights,[0])[0]};if(w(u.matrix)?(h.transform=new Float32Array(u.matrix),e.getRotation(h.rotation,h.transform),e.getTranslation(h.translation,h.transform),e.getScaling(h.scale,h.transform)):h.transform=e.fromRotationTranslationScale(e.create(),h.rotation,h.translation,h.scale),w(u.mesh)&&(h.meshId=u.mesh),w(u.skin)&&(h.skinId=u.skin),w(u.children)){h.children=[];for(let t=0;t<u.children.length;t++){const r=u.children[t];v(n.gltf.nodes)[r];h.children.push(r)}}t.nodes.push(h)}}(t,h),function(t,n){const r=T(n.gltf.skins,[]),e=T(t.nodes,[]);t.skins=[];for(let a=0;a<r.length;a++){const o=r[a],i=[],u=[];for(let t=0;t<o.joints.length;t++){const n=o.joints[t],r=e[n],a=new cr(n);a.name=T(r.name,`Bone${n}`),a.position=r.translation,a.rotation=r.rotation,a.scale=r.scale,i.push(a)}for(let t=0;t<o.joints.length;t++){const n=e[o.joints[t]];if(n.children)for(let r of n.children){const n=i.find(t=>t.nodeId===r);w(n)&&(n.parent=i[t],i[t].children.push(n))}}if(w(o.inverseBindMatrices)){const r=n.accessorData(o.inverseBindMatrices);t.transferList.push(r.buffer);for(let t=0;t<o.joints.length;t++)u[t]=r.subarray(16*t,16*t+16)}t.skins[a]={name:o.name,skeleton:o.skeleton,bones:i,inverseBindMatrices:u}}}(t,h),function(t,n){const r=T(n.gltf.scene,0);if(w(r)){const e=v(n.gltf.scenes),a=v(e[r]);t.rootNodeIds=T(a.nodes,[])}}(t,h),function(t,n){const r=T(n.gltf.animations,[]);t.animations=[];for(let e=0;e<r.length;e++){const a=r[e],o=a.samplers.map(t=>(y(5126===n.gltf.accessors[t.input].componentType,"Non-float animation time type unsupported"),y(5126===n.gltf.accessors[t.output].componentType,"Non-float animation time type unsupported"),{times:n.accessorData(t.input),floats:n.accessorData(t.output)})),i=[],u=[],s=[],c=[];a.channels.forEach(t=>{const n={nodeId:v(t.target.node),times:o[t.sampler].times,values:o[t.sampler].floats};switch(t.target.path){case"translation":i.push(n);break;case"rotation":u.push(n);break;case"scale":s.push(n);break;case"weight":c.push(n)}});const f=Math.max(...a.samplers.map(t=>v(n.gltf.accessors[t.input].max)[0]));t.animations.push({name:a.name,maxTime:f,scales:s,rotations:u,translations:i,weights:c})}}(t,h),await Promise.all(l),t.status=o.LoadingSync}loadSync(t,n){for(let r in n.bufferData){const e=n.bufferViews[r],a=n.bufferData[r];e.id=t.renderer.createBuffer(e.name,e.type,p.Static,a)}if(w(self.createImageBitmap)){for(let r in n.imageData){const e=n.imageData[r],a=n.textures[r];e instanceof ImageBitmap&&(a.id=t.renderer.createTexture(a.name,{usage:p.Static,type:c.Texture2D,format:f.U8x3,maxAnistropy:16},e),e.close())}delete n.imageData,n.status=o.Loaded}else{let e=0;for(let a in n.imageData){const i=n.imageData[a],u=n.textures[a];if(-1===u.id){if(i instanceof ArrayBuffer){var r=new Blob([i],{type:"image/jpeg"});let t=window.URL.createObjectURL(r);n.imageData[a]=new Image,n.imageData[a].src=t,n.status=o.LoadingSync}n.imageData[a].complete&&(u.id=t.renderer.createTexture(u.name,{usage:p.Static,type:c.Texture2D,format:f.U8x3,maxAnistropy:16},n.imageData[a]))}else e+=1}e===n.textures.length&&(delete n.imageData,n.status=o.Loaded)}}unloadSync(t,n){}}};onmessage=async t=>{Fr.onMessage(t)};class _r{constructor(){this.processed=[],setInterval(()=>this.update(),_r.kTickIntervalMs)}async onMessage(t){const n=t.data;for(let t of n){const n=Sr[t.source.type];if(n||(t.status=o.Failed),t.status===o.LoadingAsync)try{await n.loadAsync(t)}catch(n){t.status=o.Failed,t.error=n.message}this.processed.push(t)}}update(){if(this.processed.length>0){const t=[];for(let n of this.processed)Array.prototype.push.apply(t,n.transferList);Ur.postMessage(this.processed,t),this.processed.length=0}}}_r.kTickIntervalMs=33;const Fr=new _r;n.default={}}});