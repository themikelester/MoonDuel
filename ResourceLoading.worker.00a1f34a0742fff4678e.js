!function(t){var n={};function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)e.d(r,a,function(n){return t[n]}.bind(null,a));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=4)}({4:function(t,n,e){"use strict";e.r(n);var r={};e.r(r),e.d(r,"create",(function(){return _})),e.d(r,"clone",(function(){return F})),e.d(r,"copy",(function(){return I})),e.d(r,"fromValues",(function(){return A})),e.d(r,"set",(function(){return D})),e.d(r,"identity",(function(){return L})),e.d(r,"transpose",(function(){return N})),e.d(r,"invert",(function(){return O})),e.d(r,"adjoint",(function(){return E})),e.d(r,"determinant",(function(){return V})),e.d(r,"multiply",(function(){return q})),e.d(r,"translate",(function(){return B})),e.d(r,"scale",(function(){return R})),e.d(r,"rotate",(function(){return k})),e.d(r,"rotateX",(function(){return C})),e.d(r,"rotateY",(function(){return j})),e.d(r,"rotateZ",(function(){return H})),e.d(r,"fromTranslation",(function(){return P})),e.d(r,"fromScaling",(function(){return G})),e.d(r,"fromRotation",(function(){return W})),e.d(r,"fromXRotation",(function(){return $})),e.d(r,"fromYRotation",(function(){return X})),e.d(r,"fromZRotation",(function(){return Z})),e.d(r,"fromRotationTranslation",(function(){return J})),e.d(r,"fromQuat2",(function(){return Y})),e.d(r,"getTranslation",(function(){return z})),e.d(r,"getScaling",(function(){return K})),e.d(r,"getRotation",(function(){return Q})),e.d(r,"fromRotationTranslationScale",(function(){return tt})),e.d(r,"fromRotationTranslationScaleOrigin",(function(){return nt})),e.d(r,"fromQuat",(function(){return et})),e.d(r,"frustum",(function(){return rt})),e.d(r,"perspective",(function(){return at})),e.d(r,"perspectiveFromFieldOfView",(function(){return ot})),e.d(r,"ortho",(function(){return it})),e.d(r,"lookAt",(function(){return ut})),e.d(r,"targetTo",(function(){return st})),e.d(r,"str",(function(){return ct})),e.d(r,"frob",(function(){return ft})),e.d(r,"add",(function(){return ht})),e.d(r,"subtract",(function(){return lt})),e.d(r,"multiplyScalar",(function(){return dt})),e.d(r,"multiplyScalarAndAdd",(function(){return mt})),e.d(r,"exactEquals",(function(){return pt})),e.d(r,"equals",(function(){return Mt})),e.d(r,"mul",(function(){return bt})),e.d(r,"sub",(function(){return gt}));var a={};e.r(a),e.d(a,"create",(function(){return xt})),e.d(a,"clone",(function(){return yt})),e.d(a,"length",(function(){return vt})),e.d(a,"fromValues",(function(){return wt})),e.d(a,"copy",(function(){return Tt})),e.d(a,"set",(function(){return Ut})),e.d(a,"add",(function(){return St})),e.d(a,"subtract",(function(){return _t})),e.d(a,"multiply",(function(){return Ft})),e.d(a,"divide",(function(){return It})),e.d(a,"ceil",(function(){return At})),e.d(a,"floor",(function(){return Dt})),e.d(a,"min",(function(){return Lt})),e.d(a,"max",(function(){return Nt})),e.d(a,"round",(function(){return Ot})),e.d(a,"scale",(function(){return Et})),e.d(a,"scaleAndAdd",(function(){return Vt})),e.d(a,"distance",(function(){return qt})),e.d(a,"squaredDistance",(function(){return Bt})),e.d(a,"squaredLength",(function(){return Rt})),e.d(a,"negate",(function(){return kt})),e.d(a,"inverse",(function(){return Ct})),e.d(a,"normalize",(function(){return jt})),e.d(a,"dot",(function(){return Ht})),e.d(a,"cross",(function(){return Pt})),e.d(a,"lerp",(function(){return Gt})),e.d(a,"hermite",(function(){return Wt})),e.d(a,"bezier",(function(){return $t})),e.d(a,"random",(function(){return Xt})),e.d(a,"transformMat4",(function(){return Zt})),e.d(a,"transformMat3",(function(){return Jt})),e.d(a,"transformQuat",(function(){return Yt})),e.d(a,"rotateX",(function(){return zt})),e.d(a,"rotateY",(function(){return Kt})),e.d(a,"rotateZ",(function(){return Qt})),e.d(a,"angle",(function(){return tn})),e.d(a,"zero",(function(){return nn})),e.d(a,"str",(function(){return en})),e.d(a,"exactEquals",(function(){return rn})),e.d(a,"equals",(function(){return an})),e.d(a,"sub",(function(){return un})),e.d(a,"mul",(function(){return sn})),e.d(a,"div",(function(){return cn})),e.d(a,"dist",(function(){return fn})),e.d(a,"sqrDist",(function(){return hn})),e.d(a,"len",(function(){return ln})),e.d(a,"sqrLen",(function(){return dn})),e.d(a,"forEach",(function(){return mn}));var o,i={};e.r(i),e.d(i,"create",(function(){return bn})),e.d(i,"identity",(function(){return gn})),e.d(i,"setAxisAngle",(function(){return xn})),e.d(i,"getAxisAngle",(function(){return yn})),e.d(i,"getAngle",(function(){return vn})),e.d(i,"multiply",(function(){return wn})),e.d(i,"rotateX",(function(){return Tn})),e.d(i,"rotateY",(function(){return Un})),e.d(i,"rotateZ",(function(){return Sn})),e.d(i,"calculateW",(function(){return _n})),e.d(i,"exp",(function(){return Fn})),e.d(i,"ln",(function(){return In})),e.d(i,"pow",(function(){return An})),e.d(i,"slerp",(function(){return Dn})),e.d(i,"random",(function(){return Ln})),e.d(i,"invert",(function(){return Nn})),e.d(i,"conjugate",(function(){return On})),e.d(i,"fromMat3",(function(){return En})),e.d(i,"fromEuler",(function(){return Vn})),e.d(i,"str",(function(){return qn})),e.d(i,"clone",(function(){return Gn})),e.d(i,"fromValues",(function(){return Wn})),e.d(i,"copy",(function(){return $n})),e.d(i,"set",(function(){return Xn})),e.d(i,"add",(function(){return Zn})),e.d(i,"mul",(function(){return Jn})),e.d(i,"scale",(function(){return Yn})),e.d(i,"dot",(function(){return zn})),e.d(i,"lerp",(function(){return Kn})),e.d(i,"length",(function(){return Qn})),e.d(i,"len",(function(){return te})),e.d(i,"squaredLength",(function(){return ne})),e.d(i,"sqrLen",(function(){return ee})),e.d(i,"normalize",(function(){return re})),e.d(i,"exactEquals",(function(){return ae})),e.d(i,"equals",(function(){return oe})),e.d(i,"rotationTo",(function(){return ie})),e.d(i,"sqlerp",(function(){return ue})),e.d(i,"setAxes",(function(){return se})),function(t){t[t.LoadingAsync=0]="LoadingAsync",t[t.LoadingSync=1]="LoadingSync",t[t.Loaded=2]="Loaded",t[t.Unloaded=3]="Unloaded",t[t.Failed=4]="Failed"}(o||(o={}));var u,s,c,f,h,l,d,m,p,M,b,g,x;function y(t,n=""){if(!t){const t=new Error(`Assert fail: ${n}`);throw console.error(t.stack),t}}function v(t,n){if(null!=t)return t;throw new Error(T(n,"Missing object"))}function w(t){return null!=t}function T(t,n){return null!=t?t:n}!function(t){t[t.VertexArrayObject=1]="VertexArrayObject",t[t.TextureFloat=2]="TextureFloat",t[t.TextureHalf=4]="TextureHalf",t[t.TextureFloatLinearFiltering=8]="TextureFloatLinearFiltering",t[t.TextureHalfLinearFiltering=16]="TextureHalfLinearFiltering",t[t.TextureWrite=32]="TextureWrite",t[t.ShaderDerivatives=64]="ShaderDerivatives",t[t.Instancing=128]="Instancing",t[t.AnistropicFiltering=256]="AnistropicFiltering"}(u||(u={})),function(t){t[t.Undefined=0]="Undefined",t[t.Float=1]="Float",t[t.Float2=2]="Float2",t[t.Float3=3]="Float3",t[t.Float4=4]="Float4",t[t.Int=5]="Int",t[t.Int2=6]="Int2",t[t.Int3=7]="Int3",t[t.Int4=8]="Int4",t[t.Uint=9]="Uint",t[t.Uint2=10]="Uint2",t[t.Uint3=11]="Uint3",t[t.Uint4=12]="Uint4",t[t.Short=13]="Short",t[t.Short2=14]="Short2",t[t.Short3=15]="Short3",t[t.Short4=16]="Short4",t[t.Ushort=17]="Ushort",t[t.Ushort2=18]="Ushort2",t[t.Ushort3=19]="Ushort3",t[t.Ushort4=20]="Ushort4",t[t.Char=21]="Char",t[t.Char2=22]="Char2",t[t.Char3=23]="Char3",t[t.Char4=24]="Char4",t[t.Uchar=25]="Uchar",t[t.Uchar2=26]="Uchar2",t[t.Uchar3=27]="Uchar3",t[t.Uchar4=28]="Uchar4",t[t.Half=29]="Half",t[t.Half2=30]="Half2",t[t.Half3=31]="Half3",t[t.Half4=32]="Half4",t[t.Float3x3=33]="Float3x3",t[t.Float3x4=34]="Float3x4",t[t.Float4x4=35]="Float4x4",t[t.Texture2D=240]="Texture2D",t[t.Texture3D=241]="Texture3D",t[t.TextureCube=242]="TextureCube",t[t.Short_Norm=256]="Short_Norm",t[t.Short2_Norm=257]="Short2_Norm",t[t.Short3_Norm=258]="Short3_Norm",t[t.Short4_Norm=259]="Short4_Norm",t[t.Ushort_Norm=260]="Ushort_Norm",t[t.Ushort2_Norm=261]="Ushort2_Norm",t[t.Ushort3_Norm=262]="Ushort3_Norm",t[t.Ushort4_Norm=263]="Ushort4_Norm",t[t.Char_Norm=264]="Char_Norm",t[t.Char2_Norm=265]="Char2_Norm",t[t.Char3_Norm=266]="Char3_Norm",t[t.Char4_Norm=267]="Char4_Norm",t[t.Uchar_Norm=268]="Uchar_Norm",t[t.Uchar2_Norm=269]="Uchar2_Norm",t[t.Uchar3_Norm=270]="Uchar3_Norm",t[t.Uchar4_Norm=271]="Uchar4_Norm"}(s||(s={})),function(t){t[t.Texture2D=240]="Texture2D",t[t.Texture3D=241]="Texture3D",t[t.TextureCube=242]="TextureCube"}(c||(c={})),function(t){t[t.Undefined=0]="Undefined",t[t.U565=1]="U565",t[t.U8=2]="U8",t[t.U8_sRGB=3]="U8_sRGB",t[t.U8x2=4]="U8x2",t[t.U8x2_sRGB=5]="U8x2_sRGB",t[t.U8x3=6]="U8x3",t[t.U8x3_sRGB=7]="U8x3_sRGB",t[t.U8x4=8]="U8x4",t[t.U8x4_sRGB=9]="U8x4_sRGB",t[t.U10_10_10_2=10]="U10_10_10_2",t[t.F11_11_10=11]="F11_11_10",t[t.F16=12]="F16",t[t.F16x2=13]="F16x2",t[t.F16x3=14]="F16x3",t[t.F16x4=15]="F16x4",t[t.F32x2=16]="F32x2",t[t.F32x3=17]="F32x3",t[t.F32x4=18]="F32x4",t[t.Depth32=19]="Depth32",t[t.Depth24Stencil8=20]="Depth24Stencil8"}(f||(f={})),function(t){t[t.Nearest=0]="Nearest",t[t.Linear=1]="Linear"}(h||(h={})),function(t){t[t.Never=0]="Never",t[t.Less=1]="Less",t[t.Equal=2]="Equal",t[t.LessEqual=3]="LessEqual",t[t.Greater=4]="Greater",t[t.NotEqual=5]="NotEqual",t[t.GreaterEqual=6]="GreaterEqual",t[t.Always=7]="Always"}(l||(l={})),function(t){t[t.Points=0]="Points",t[t.Lines=1]="Lines",t[t.LineLoop=2]="LineLoop",t[t.LineStrip=3]="LineStrip",t[t.Triangles=4]="Triangles",t[t.TriangleStrip=5]="TriangleStrip",t[t.TriangleFan=6]="TriangleFan"}(d||(d={})),function(t){t[t.Undefined=0]="Undefined",t[t.Uniform=1]="Uniform",t[t.Vertex=2]="Vertex",t[t.Index=3]="Index",t[t.Readback=4]="Readback"}(m||(m={})),function(t){t[t.Undefined=0]="Undefined",t[t.UniformBuffer=1]="UniformBuffer",t[t.Texture=2]="Texture"}(p||(p={})),function(t){t[t.None=0]="None",t[t.Static=1]="Static",t[t.Dynamic=2]="Dynamic"}(M||(M={})),function(t){t[t.None=0]="None",t[t.Back=1]="Back",t[t.Front=2]="Front"}(b||(b={})),function(t){t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Source=2]="Source",t[t.OneMinusSource=3]="OneMinusSource"}(g||(g={})),function(t){t[t.Vertex=0]="Vertex",t[t.Instance=1]="Instance"}(x||(x={}));var U="undefined"!=typeof Float32Array?Float32Array:Array,S=Math.random;Math.PI;function _(){var t=new U(16);return U!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function F(t){var n=new U(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function I(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function A(t,n,e,r,a,o,i,u,s,c,f,h,l,d,m,p){var M=new U(16);return M[0]=t,M[1]=n,M[2]=e,M[3]=r,M[4]=a,M[5]=o,M[6]=i,M[7]=u,M[8]=s,M[9]=c,M[10]=f,M[11]=h,M[12]=l,M[13]=d,M[14]=m,M[15]=p,M}function D(t,n,e,r,a,o,i,u,s,c,f,h,l,d,m,p,M){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t[9]=f,t[10]=h,t[11]=l,t[12]=d,t[13]=m,t[14]=p,t[15]=M,t}function L(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function N(t,n){if(t===n){var e=n[1],r=n[2],a=n[3],o=n[6],i=n[7],u=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=o,t[11]=n[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}function O(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=n[6],c=n[7],f=n[8],h=n[9],l=n[10],d=n[11],m=n[12],p=n[13],M=n[14],b=n[15],g=e*u-r*i,x=e*s-a*i,y=e*c-o*i,v=r*s-a*u,w=r*c-o*u,T=a*c-o*s,U=f*p-h*m,S=f*M-l*m,_=f*b-d*m,F=h*M-l*p,I=h*b-d*p,A=l*b-d*M,D=g*A-x*I+y*F+v*_-w*S+T*U;return D?(D=1/D,t[0]=(u*A-s*I+c*F)*D,t[1]=(a*I-r*A-o*F)*D,t[2]=(p*T-M*w+b*v)*D,t[3]=(l*w-h*T-d*v)*D,t[4]=(s*_-i*A-c*S)*D,t[5]=(e*A-a*_+o*S)*D,t[6]=(M*y-m*T-b*x)*D,t[7]=(f*T-l*y+d*x)*D,t[8]=(i*I-u*_+c*U)*D,t[9]=(r*_-e*I-o*U)*D,t[10]=(m*w-p*y+b*g)*D,t[11]=(h*y-f*w-d*g)*D,t[12]=(u*S-i*F-s*U)*D,t[13]=(e*F-r*S+a*U)*D,t[14]=(p*x-m*v-M*g)*D,t[15]=(f*v-h*x+l*g)*D,t):null}function E(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=n[6],c=n[7],f=n[8],h=n[9],l=n[10],d=n[11],m=n[12],p=n[13],M=n[14],b=n[15];return t[0]=u*(l*b-d*M)-h*(s*b-c*M)+p*(s*d-c*l),t[1]=-(r*(l*b-d*M)-h*(a*b-o*M)+p*(a*d-o*l)),t[2]=r*(s*b-c*M)-u*(a*b-o*M)+p*(a*c-o*s),t[3]=-(r*(s*d-c*l)-u*(a*d-o*l)+h*(a*c-o*s)),t[4]=-(i*(l*b-d*M)-f*(s*b-c*M)+m*(s*d-c*l)),t[5]=e*(l*b-d*M)-f*(a*b-o*M)+m*(a*d-o*l),t[6]=-(e*(s*b-c*M)-i*(a*b-o*M)+m*(a*c-o*s)),t[7]=e*(s*d-c*l)-i*(a*d-o*l)+f*(a*c-o*s),t[8]=i*(h*b-d*p)-f*(u*b-c*p)+m*(u*d-c*h),t[9]=-(e*(h*b-d*p)-f*(r*b-o*p)+m*(r*d-o*h)),t[10]=e*(u*b-c*p)-i*(r*b-o*p)+m*(r*c-o*u),t[11]=-(e*(u*d-c*h)-i*(r*d-o*h)+f*(r*c-o*u)),t[12]=-(i*(h*M-l*p)-f*(u*M-s*p)+m*(u*l-s*h)),t[13]=e*(h*M-l*p)-f*(r*M-a*p)+m*(r*l-a*h),t[14]=-(e*(u*M-s*p)-i*(r*M-a*p)+m*(r*s-a*u)),t[15]=e*(u*l-s*h)-i*(r*l-a*h)+f*(r*s-a*u),t}function V(t){var n=t[0],e=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],c=t[8],f=t[9],h=t[10],l=t[11],d=t[12],m=t[13],p=t[14],M=t[15];return(n*i-e*o)*(h*M-l*p)-(n*u-r*o)*(f*M-l*m)+(n*s-a*o)*(f*p-h*m)+(e*u-r*i)*(c*M-l*d)-(e*s-a*i)*(c*p-h*d)+(r*s-a*u)*(c*m-f*d)}function q(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],c=n[6],f=n[7],h=n[8],l=n[9],d=n[10],m=n[11],p=n[12],M=n[13],b=n[14],g=n[15],x=e[0],y=e[1],v=e[2],w=e[3];return t[0]=x*r+y*u+v*h+w*p,t[1]=x*a+y*s+v*l+w*M,t[2]=x*o+y*c+v*d+w*b,t[3]=x*i+y*f+v*m+w*g,x=e[4],y=e[5],v=e[6],w=e[7],t[4]=x*r+y*u+v*h+w*p,t[5]=x*a+y*s+v*l+w*M,t[6]=x*o+y*c+v*d+w*b,t[7]=x*i+y*f+v*m+w*g,x=e[8],y=e[9],v=e[10],w=e[11],t[8]=x*r+y*u+v*h+w*p,t[9]=x*a+y*s+v*l+w*M,t[10]=x*o+y*c+v*d+w*b,t[11]=x*i+y*f+v*m+w*g,x=e[12],y=e[13],v=e[14],w=e[15],t[12]=x*r+y*u+v*h+w*p,t[13]=x*a+y*s+v*l+w*M,t[14]=x*o+y*c+v*d+w*b,t[15]=x*i+y*f+v*m+w*g,t}function B(t,n,e){var r,a,o,i,u,s,c,f,h,l,d,m,p=e[0],M=e[1],b=e[2];return n===t?(t[12]=n[0]*p+n[4]*M+n[8]*b+n[12],t[13]=n[1]*p+n[5]*M+n[9]*b+n[13],t[14]=n[2]*p+n[6]*M+n[10]*b+n[14],t[15]=n[3]*p+n[7]*M+n[11]*b+n[15]):(r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],s=n[5],c=n[6],f=n[7],h=n[8],l=n[9],d=n[10],m=n[11],t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=s,t[6]=c,t[7]=f,t[8]=h,t[9]=l,t[10]=d,t[11]=m,t[12]=r*p+u*M+h*b+n[12],t[13]=a*p+s*M+l*b+n[13],t[14]=o*p+c*M+d*b+n[14],t[15]=i*p+f*M+m*b+n[15]),t}function R(t,n,e){var r=e[0],a=e[1],o=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=n[7]*a,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function k(t,n,e,r){var a,o,i,u,s,c,f,h,l,d,m,p,M,b,g,x,y,v,w,T,U,S,_,F,I=r[0],A=r[1],D=r[2],L=Math.hypot(I,A,D);return L<1e-6?null:(I*=L=1/L,A*=L,D*=L,a=Math.sin(e),i=1-(o=Math.cos(e)),u=n[0],s=n[1],c=n[2],f=n[3],h=n[4],l=n[5],d=n[6],m=n[7],p=n[8],M=n[9],b=n[10],g=n[11],x=I*I*i+o,y=A*I*i+D*a,v=D*I*i-A*a,w=I*A*i-D*a,T=A*A*i+o,U=D*A*i+I*a,S=I*D*i+A*a,_=A*D*i-I*a,F=D*D*i+o,t[0]=u*x+h*y+p*v,t[1]=s*x+l*y+M*v,t[2]=c*x+d*y+b*v,t[3]=f*x+m*y+g*v,t[4]=u*w+h*T+p*U,t[5]=s*w+l*T+M*U,t[6]=c*w+d*T+b*U,t[7]=f*w+m*T+g*U,t[8]=u*S+h*_+p*F,t[9]=s*S+l*_+M*F,t[10]=c*S+d*_+b*F,t[11]=f*S+m*_+g*F,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}function C(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[4],i=n[5],u=n[6],s=n[7],c=n[8],f=n[9],h=n[10],l=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=o*a+c*r,t[5]=i*a+f*r,t[6]=u*a+h*r,t[7]=s*a+l*r,t[8]=c*a-o*r,t[9]=f*a-i*r,t[10]=h*a-u*r,t[11]=l*a-s*r,t}function j(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[0],i=n[1],u=n[2],s=n[3],c=n[8],f=n[9],h=n[10],l=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a-c*r,t[1]=i*a-f*r,t[2]=u*a-h*r,t[3]=s*a-l*r,t[8]=o*r+c*a,t[9]=i*r+f*a,t[10]=u*r+h*a,t[11]=s*r+l*a,t}function H(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[0],i=n[1],u=n[2],s=n[3],c=n[4],f=n[5],h=n[6],l=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a+c*r,t[1]=i*a+f*r,t[2]=u*a+h*r,t[3]=s*a+l*r,t[4]=c*a-o*r,t[5]=f*a-i*r,t[6]=h*a-u*r,t[7]=l*a-s*r,t}function P(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function G(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function W(t,n,e){var r,a,o,i=e[0],u=e[1],s=e[2],c=Math.hypot(i,u,s);return c<1e-6?null:(i*=c=1/c,u*=c,s*=c,r=Math.sin(n),o=1-(a=Math.cos(n)),t[0]=i*i*o+a,t[1]=u*i*o+s*r,t[2]=s*i*o-u*r,t[3]=0,t[4]=i*u*o-s*r,t[5]=u*u*o+a,t[6]=s*u*o+i*r,t[7]=0,t[8]=i*s*o+u*r,t[9]=u*s*o-i*r,t[10]=s*s*o+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function $(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function X(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Z(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function J(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=r+r,s=a+a,c=o+o,f=r*u,h=r*s,l=r*c,d=a*s,m=a*c,p=o*c,M=i*u,b=i*s,g=i*c;return t[0]=1-(d+p),t[1]=h+g,t[2]=l-b,t[3]=0,t[4]=h-g,t[5]=1-(f+p),t[6]=m+M,t[7]=0,t[8]=l+b,t[9]=m-M,t[10]=1-(f+d),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Y(t,n){var e=new U(3),r=-n[0],a=-n[1],o=-n[2],i=n[3],u=n[4],s=n[5],c=n[6],f=n[7],h=r*r+a*a+o*o+i*i;return h>0?(e[0]=2*(u*i+f*r+s*o-c*a)/h,e[1]=2*(s*i+f*a+c*r-u*o)/h,e[2]=2*(c*i+f*o+u*a-s*r)/h):(e[0]=2*(u*i+f*r+s*o-c*a),e[1]=2*(s*i+f*a+c*r-u*o),e[2]=2*(c*i+f*o+u*a-s*r)),J(t,n,e),t}function z(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function K(t,n){var e=n[0],r=n[1],a=n[2],o=n[4],i=n[5],u=n[6],s=n[8],c=n[9],f=n[10];return t[0]=Math.hypot(e,r,a),t[1]=Math.hypot(o,i,u),t[2]=Math.hypot(s,c,f),t}function Q(t,n){var e=new U(3);K(e,n);var r=1/e[0],a=1/e[1],o=1/e[2],i=n[0]*r,u=n[1]*a,s=n[2]*o,c=n[4]*r,f=n[5]*a,h=n[6]*o,l=n[8]*r,d=n[9]*a,m=n[10]*o,p=i+f+m,M=0;return p>0?(M=2*Math.sqrt(p+1),t[3]=.25*M,t[0]=(h-d)/M,t[1]=(l-s)/M,t[2]=(u-c)/M):i>f&&i>m?(M=2*Math.sqrt(1+i-f-m),t[3]=(h-d)/M,t[0]=.25*M,t[1]=(u+c)/M,t[2]=(l+s)/M):f>m?(M=2*Math.sqrt(1+f-i-m),t[3]=(l-s)/M,t[0]=(u+c)/M,t[1]=.25*M,t[2]=(h+d)/M):(M=2*Math.sqrt(1+m-i-f),t[3]=(u-c)/M,t[0]=(l+s)/M,t[1]=(h+d)/M,t[2]=.25*M),t}function tt(t,n,e,r){var a=n[0],o=n[1],i=n[2],u=n[3],s=a+a,c=o+o,f=i+i,h=a*s,l=a*c,d=a*f,m=o*c,p=o*f,M=i*f,b=u*s,g=u*c,x=u*f,y=r[0],v=r[1],w=r[2];return t[0]=(1-(m+M))*y,t[1]=(l+x)*y,t[2]=(d-g)*y,t[3]=0,t[4]=(l-x)*v,t[5]=(1-(h+M))*v,t[6]=(p+b)*v,t[7]=0,t[8]=(d+g)*w,t[9]=(p-b)*w,t[10]=(1-(h+m))*w,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function nt(t,n,e,r,a){var o=n[0],i=n[1],u=n[2],s=n[3],c=o+o,f=i+i,h=u+u,l=o*c,d=o*f,m=o*h,p=i*f,M=i*h,b=u*h,g=s*c,x=s*f,y=s*h,v=r[0],w=r[1],T=r[2],U=a[0],S=a[1],_=a[2],F=(1-(p+b))*v,I=(d+y)*v,A=(m-x)*v,D=(d-y)*w,L=(1-(l+b))*w,N=(M+g)*w,O=(m+x)*T,E=(M-g)*T,V=(1-(l+p))*T;return t[0]=F,t[1]=I,t[2]=A,t[3]=0,t[4]=D,t[5]=L,t[6]=N,t[7]=0,t[8]=O,t[9]=E,t[10]=V,t[11]=0,t[12]=e[0]+U-(F*U+D*S+O*_),t[13]=e[1]+S-(I*U+L*S+E*_),t[14]=e[2]+_-(A*U+N*S+V*_),t[15]=1,t}function et(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e+e,u=r+r,s=a+a,c=e*i,f=r*i,h=r*u,l=a*i,d=a*u,m=a*s,p=o*i,M=o*u,b=o*s;return t[0]=1-h-m,t[1]=f+b,t[2]=l-M,t[3]=0,t[4]=f-b,t[5]=1-c-m,t[6]=d+p,t[7]=0,t[8]=l+M,t[9]=d-p,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function rt(t,n,e,r,a,o,i){var u=1/(e-n),s=1/(a-r),c=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(e+n)*u,t[9]=(a+r)*s,t[10]=(i+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*c,t[15]=0,t}function at(t,n,e,r,a){var o,i=1/Math.tan(n/2);return t[0]=i/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(o=1/(r-a),t[10]=(a+r)*o,t[14]=2*a*r*o):(t[10]=-1,t[14]=-2*r),t}function ot(t,n,e,r){var a=Math.tan(n.upDegrees*Math.PI/180),o=Math.tan(n.downDegrees*Math.PI/180),i=Math.tan(n.leftDegrees*Math.PI/180),u=Math.tan(n.rightDegrees*Math.PI/180),s=2/(i+u),c=2/(a+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(i-u)*s*.5,t[9]=(a-o)*c*.5,t[10]=r/(e-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*e/(e-r),t[15]=0,t}function it(t,n,e,r,a,o,i){var u=1/(n-e),s=1/(r-a),c=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(n+e)*u,t[13]=(a+r)*s,t[14]=(i+o)*c,t[15]=1,t}function ut(t,n,e,r){var a,o,i,u,s,c,f,h,l,d,m=n[0],p=n[1],M=n[2],b=r[0],g=r[1],x=r[2],y=e[0],v=e[1],w=e[2];return Math.abs(m-y)<1e-6&&Math.abs(p-v)<1e-6&&Math.abs(M-w)<1e-6?L(t):(f=m-y,h=p-v,l=M-w,a=g*(l*=d=1/Math.hypot(f,h,l))-x*(h*=d),o=x*(f*=d)-b*l,i=b*h-g*f,(d=Math.hypot(a,o,i))?(a*=d=1/d,o*=d,i*=d):(a=0,o=0,i=0),u=h*i-l*o,s=l*a-f*i,c=f*o-h*a,(d=Math.hypot(u,s,c))?(u*=d=1/d,s*=d,c*=d):(u=0,s=0,c=0),t[0]=a,t[1]=u,t[2]=f,t[3]=0,t[4]=o,t[5]=s,t[6]=h,t[7]=0,t[8]=i,t[9]=c,t[10]=l,t[11]=0,t[12]=-(a*m+o*p+i*M),t[13]=-(u*m+s*p+c*M),t[14]=-(f*m+h*p+l*M),t[15]=1,t)}function st(t,n,e,r){var a=n[0],o=n[1],i=n[2],u=r[0],s=r[1],c=r[2],f=a-e[0],h=o-e[1],l=i-e[2],d=f*f+h*h+l*l;d>0&&(f*=d=1/Math.sqrt(d),h*=d,l*=d);var m=s*l-c*h,p=c*f-u*l,M=u*h-s*f;return(d=m*m+p*p+M*M)>0&&(m*=d=1/Math.sqrt(d),p*=d,M*=d),t[0]=m,t[1]=p,t[2]=M,t[3]=0,t[4]=h*M-l*p,t[5]=l*m-f*M,t[6]=f*p-h*m,t[7]=0,t[8]=f,t[9]=h,t[10]=l,t[11]=0,t[12]=a,t[13]=o,t[14]=i,t[15]=1,t}function ct(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function ft(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function ht(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t[9]=n[9]+e[9],t[10]=n[10]+e[10],t[11]=n[11]+e[11],t[12]=n[12]+e[12],t[13]=n[13]+e[13],t[14]=n[14]+e[14],t[15]=n[15]+e[15],t}function lt(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t[9]=n[9]-e[9],t[10]=n[10]-e[10],t[11]=n[11]-e[11],t[12]=n[12]-e[12],t[13]=n[13]-e[13],t[14]=n[14]-e[14],t[15]=n[15]-e[15],t}function dt(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=n[11]*e,t[12]=n[12]*e,t[13]=n[13]*e,t[14]=n[14]*e,t[15]=n[15]*e,t}function mt(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t[9]=n[9]+e[9]*r,t[10]=n[10]+e[10]*r,t[11]=n[11]+e[11]*r,t[12]=n[12]+e[12]*r,t[13]=n[13]+e[13]*r,t[14]=n[14]+e[14]*r,t[15]=n[15]+e[15]*r,t}function pt(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]}function Mt(t,n){var e=t[0],r=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=t[8],h=t[9],l=t[10],d=t[11],m=t[12],p=t[13],M=t[14],b=t[15],g=n[0],x=n[1],y=n[2],v=n[3],w=n[4],T=n[5],U=n[6],S=n[7],_=n[8],F=n[9],I=n[10],A=n[11],D=n[12],L=n[13],N=n[14],O=n[15];return Math.abs(e-g)<=1e-6*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(r-x)<=1e-6*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(a-y)<=1e-6*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(o-v)<=1e-6*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(i-w)<=1e-6*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(u-T)<=1e-6*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(s-U)<=1e-6*Math.max(1,Math.abs(s),Math.abs(U))&&Math.abs(c-S)<=1e-6*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(f-_)<=1e-6*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(h-F)<=1e-6*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(l-I)<=1e-6*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(d-A)<=1e-6*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(m-D)<=1e-6*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(p-L)<=1e-6*Math.max(1,Math.abs(p),Math.abs(L))&&Math.abs(M-N)<=1e-6*Math.max(1,Math.abs(M),Math.abs(N))&&Math.abs(b-O)<=1e-6*Math.max(1,Math.abs(b),Math.abs(O))}Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});var bt=q,gt=lt;function xt(){var t=new U(3);return U!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function yt(t){var n=new U(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function vt(t){var n=t[0],e=t[1],r=t[2];return Math.hypot(n,e,r)}function wt(t,n,e){var r=new U(3);return r[0]=t,r[1]=n,r[2]=e,r}function Tt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function Ut(t,n,e,r){return t[0]=n,t[1]=e,t[2]=r,t}function St(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t}function _t(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t}function Ft(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t}function It(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t}function At(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t}function Dt(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t}function Lt(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t}function Nt(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t}function Ot(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t}function Et(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t}function Vt(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t}function qt(t,n){var e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2];return Math.hypot(e,r,a)}function Bt(t,n){var e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2];return e*e+r*r+a*a}function Rt(t){var n=t[0],e=t[1],r=t[2];return n*n+e*e+r*r}function kt(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function Ct(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t}function jt(t,n){var e=n[0],r=n[1],a=n[2],o=e*e+r*r+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o,t}function Ht(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Pt(t,n,e){var r=n[0],a=n[1],o=n[2],i=e[0],u=e[1],s=e[2];return t[0]=a*s-o*u,t[1]=o*i-r*s,t[2]=r*u-a*i,t}function Gt(t,n,e,r){var a=n[0],o=n[1],i=n[2];return t[0]=a+r*(e[0]-a),t[1]=o+r*(e[1]-o),t[2]=i+r*(e[2]-i),t}function Wt(t,n,e,r,a,o){var i=o*o,u=i*(2*o-3)+1,s=i*(o-2)+o,c=i*(o-1),f=i*(3-2*o);return t[0]=n[0]*u+e[0]*s+r[0]*c+a[0]*f,t[1]=n[1]*u+e[1]*s+r[1]*c+a[1]*f,t[2]=n[2]*u+e[2]*s+r[2]*c+a[2]*f,t}function $t(t,n,e,r,a,o){var i=1-o,u=i*i,s=o*o,c=u*i,f=3*o*u,h=3*s*i,l=s*o;return t[0]=n[0]*c+e[0]*f+r[0]*h+a[0]*l,t[1]=n[1]*c+e[1]*f+r[1]*h+a[1]*l,t[2]=n[2]*c+e[2]*f+r[2]*h+a[2]*l,t}function Xt(t,n){n=n||1;var e=2*S()*Math.PI,r=2*S()-1,a=Math.sqrt(1-r*r)*n;return t[0]=Math.cos(e)*a,t[1]=Math.sin(e)*a,t[2]=r*n,t}function Zt(t,n,e){var r=n[0],a=n[1],o=n[2],i=e[3]*r+e[7]*a+e[11]*o+e[15];return i=i||1,t[0]=(e[0]*r+e[4]*a+e[8]*o+e[12])/i,t[1]=(e[1]*r+e[5]*a+e[9]*o+e[13])/i,t[2]=(e[2]*r+e[6]*a+e[10]*o+e[14])/i,t}function Jt(t,n,e){var r=n[0],a=n[1],o=n[2];return t[0]=r*e[0]+a*e[3]+o*e[6],t[1]=r*e[1]+a*e[4]+o*e[7],t[2]=r*e[2]+a*e[5]+o*e[8],t}function Yt(t,n,e){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],s=n[1],c=n[2],f=a*c-o*s,h=o*u-r*c,l=r*s-a*u,d=a*l-o*h,m=o*f-r*l,p=r*h-a*f,M=2*i;return f*=M,h*=M,l*=M,d*=2,m*=2,p*=2,t[0]=u+f+d,t[1]=s+h+m,t[2]=c+l+p,t}function zt(t,n,e,r){var a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t}function Kt(t,n,e,r){var a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t}function Qt(t,n,e,r){var a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t}function tn(t,n){var e=t[0],r=t[1],a=t[2],o=n[0],i=n[1],u=n[2],s=Math.sqrt(e*e+r*r+a*a)*Math.sqrt(o*o+i*i+u*u),c=s&&Ht(t,n)/s;return Math.acos(Math.min(Math.max(c,-1),1))}function nn(t){return t[0]=0,t[1]=0,t[2]=0,t}function en(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function rn(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}function an(t,n){var e=t[0],r=t[1],a=t[2],o=n[0],i=n[1],u=n[2];return Math.abs(e-o)<=1e-6*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(r-i)<=1e-6*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-u)<=1e-6*Math.max(1,Math.abs(a),Math.abs(u))}var on,un=_t,sn=Ft,cn=It,fn=qt,hn=Bt,ln=vt,dn=Rt,mn=(on=xt(),function(t,n,e,r,a,o){var i,u;for(n||(n=3),e||(e=0),u=r?Math.min(r*n+e,t.length):t.length,i=e;i<u;i+=n)on[0]=t[i],on[1]=t[i+1],on[2]=t[i+2],a(on,on,o),t[i]=on[0],t[i+1]=on[1],t[i+2]=on[2];return t});function pn(t){var n=t[0],e=t[1],r=t[2],a=t[3];return Math.hypot(n,e,r,a)}function Mn(t){var n=t[0],e=t[1],r=t[2],a=t[3];return n*n+e*e+r*r+a*a}!function(){var t,n=(t=new U(4),U!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t)}();function bn(){var t=new U(4);return U!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function gn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function xn(t,n,e){e*=.5;var r=Math.sin(e);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(e),t}function yn(t,n){var e=2*Math.acos(n[3]),r=Math.sin(e/2);return r>1e-6?(t[0]=n[0]/r,t[1]=n[1]/r,t[2]=n[2]/r):(t[0]=1,t[1]=0,t[2]=0),e}function vn(t,n){var e=zn(t,n);return Math.acos(2*e*e-1)}function wn(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=e[0],s=e[1],c=e[2],f=e[3];return t[0]=r*f+i*u+a*c-o*s,t[1]=a*f+i*s+o*u-r*c,t[2]=o*f+i*c+r*s-a*u,t[3]=i*f-r*u-a*s-o*c,t}function Tn(t,n,e){e*=.5;var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),s=Math.cos(e);return t[0]=r*s+i*u,t[1]=a*s+o*u,t[2]=o*s-a*u,t[3]=i*s-r*u,t}function Un(t,n,e){e*=.5;var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),s=Math.cos(e);return t[0]=r*s-o*u,t[1]=a*s+i*u,t[2]=o*s+r*u,t[3]=i*s-a*u,t}function Sn(t,n,e){e*=.5;var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),s=Math.cos(e);return t[0]=r*s+a*u,t[1]=a*s-r*u,t[2]=o*s+i*u,t[3]=i*s-o*u,t}function _n(t,n){var e=n[0],r=n[1],a=n[2];return t[0]=e,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-e*e-r*r-a*a)),t}function Fn(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=Math.sqrt(e*e+r*r+a*a),u=Math.exp(o),s=i>0?u*Math.sin(i)/i:0;return t[0]=e*s,t[1]=r*s,t[2]=a*s,t[3]=u*Math.cos(i),t}function In(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=Math.sqrt(e*e+r*r+a*a),u=i>0?Math.atan2(i,o)/i:0;return t[0]=e*u,t[1]=r*u,t[2]=a*u,t[3]=.5*Math.log(e*e+r*r+a*a+o*o),t}function An(t,n,e){return In(t,n),Yn(t,t,e),Fn(t,t),t}function Dn(t,n,e,r){var a,o,i,u,s,c=n[0],f=n[1],h=n[2],l=n[3],d=e[0],m=e[1],p=e[2],M=e[3];return(o=c*d+f*m+h*p+l*M)<0&&(o=-o,d=-d,m=-m,p=-p,M=-M),1-o>1e-6?(a=Math.acos(o),i=Math.sin(a),u=Math.sin((1-r)*a)/i,s=Math.sin(r*a)/i):(u=1-r,s=r),t[0]=u*c+s*d,t[1]=u*f+s*m,t[2]=u*h+s*p,t[3]=u*l+s*M,t}function Ln(t){var n=S(),e=S(),r=S(),a=Math.sqrt(1-n),o=Math.sqrt(n);return t[0]=a*Math.sin(2*Math.PI*e),t[1]=a*Math.cos(2*Math.PI*e),t[2]=o*Math.sin(2*Math.PI*r),t[3]=o*Math.cos(2*Math.PI*r),t}function Nn(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e*e+r*r+a*a+o*o,u=i?1/i:0;return t[0]=-e*u,t[1]=-r*u,t[2]=-a*u,t[3]=o*u,t}function On(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t}function En(t,n){var e,r=n[0]+n[4]+n[8];if(r>0)e=Math.sqrt(r+1),t[3]=.5*e,e=.5/e,t[0]=(n[5]-n[7])*e,t[1]=(n[6]-n[2])*e,t[2]=(n[1]-n[3])*e;else{var a=0;n[4]>n[0]&&(a=1),n[8]>n[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;e=Math.sqrt(n[3*a+a]-n[3*o+o]-n[3*i+i]+1),t[a]=.5*e,e=.5/e,t[3]=(n[3*o+i]-n[3*i+o])*e,t[o]=(n[3*o+a]+n[3*a+o])*e,t[i]=(n[3*i+a]+n[3*a+i])*e}return t}function Vn(t,n,e,r){var a=.5*Math.PI/180;n*=a,e*=a,r*=a;var o=Math.sin(n),i=Math.cos(n),u=Math.sin(e),s=Math.cos(e),c=Math.sin(r),f=Math.cos(r);return t[0]=o*s*f-i*u*c,t[1]=i*u*f+o*s*c,t[2]=i*s*c-o*u*f,t[3]=i*s*f+o*u*c,t}function qn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Bn,Rn,kn,Cn,jn,Hn,Pn,Gn=function(t){var n=new U(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},Wn=function(t,n,e,r){var a=new U(4);return a[0]=t,a[1]=n,a[2]=e,a[3]=r,a},$n=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},Xn=function(t,n,e,r,a){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t},Zn=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t},Jn=wn,Yn=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t},zn=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]},Kn=function(t,n,e,r){var a=n[0],o=n[1],i=n[2],u=n[3];return t[0]=a+r*(e[0]-a),t[1]=o+r*(e[1]-o),t[2]=i+r*(e[2]-i),t[3]=u+r*(e[3]-u),t},Qn=pn,te=Qn,ne=Mn,ee=ne,re=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e*e+r*r+a*a+o*o;return i>0&&(i=1/Math.sqrt(i)),t[0]=e*i,t[1]=r*i,t[2]=a*i,t[3]=o*i,t},ae=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},oe=function(t,n){var e=t[0],r=t[1],a=t[2],o=t[3],i=n[0],u=n[1],s=n[2],c=n[3];return Math.abs(e-i)<=1e-6*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(r-u)<=1e-6*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-s)<=1e-6*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-c)<=1e-6*Math.max(1,Math.abs(o),Math.abs(c))},ie=(Bn=xt(),Rn=wt(1,0,0),kn=wt(0,1,0),function(t,n,e){var r=Ht(n,e);return r<-.999999?(Pt(Bn,Rn,n),ln(Bn)<1e-6&&Pt(Bn,kn,n),jt(Bn,Bn),xn(t,Bn,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(Pt(Bn,n,e),t[0]=Bn[0],t[1]=Bn[1],t[2]=Bn[2],t[3]=1+r,re(t,t))}),ue=(Cn=bn(),jn=bn(),function(t,n,e,r,a,o){return Dn(Cn,n,a,o),Dn(jn,e,r,o),Dn(t,Cn,jn,2*o*(1-o)),t}),se=(Hn=new U(9),U!=Float32Array&&(Hn[1]=0,Hn[2]=0,Hn[3]=0,Hn[5]=0,Hn[6]=0,Hn[7]=0),Hn[0]=1,Hn[4]=1,Hn[8]=1,Pn=Hn,function(t,n,e,r){return Pn[0]=e[0],Pn[3]=e[1],Pn[6]=e[2],Pn[1]=r[0],Pn[4]=r[1],Pn[7]=r[2],Pn[2]=-n[0],Pn[5]=-n[1],Pn[8]=-n[2],re(t,En(t,Pn))});r.create();class ce extends class{constructor(){this.matrixWorldDirty=!0,this.matrixDirty=!0,this.name="",this.position=a.create(),this.rotation=i.create(),this.scale=a.create(),this.matrix=r.create(),this.matrixWorld=r.create(),this.parent=null,this.children=[]}updateMatrix(){r.fromRotationTranslationScale(this.matrix,this.rotation,this.position,this.scale),this.matrixWorldDirty=!0}updateMatrixWorld(t,n){const e=this.parent;if(!0===t&&w(e)&&e.updateMatrixWorld(!0,!1),w(this.parent)?r.multiply(this.matrixWorld,this.parent.matrixWorld,this.matrix):r.copy(this.matrixWorld,this.matrix),!0===n){const t=this.children;for(let n=0,e=t.length;n<e;n++)t[n].updateMatrixWorld(!1,!0)}}add(t,...n){v(t),y(t!==this,"Object can't be added as a child of itself"),null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t);for(let t=0;t<n.length;t++)this.add(n[t]);return this}remove(t,...n){const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1)),this}clone(t){return(new this.constructor).copy(this,t)}copy(t,n=!0){if(this.name=t.name,a.copy(this.position,t.position),i.copy(this.rotation,t.rotation),a.copy(this.scale,t.scale),this.matrix=r.copy(this.matrix,t.matrix),this.matrixWorld=r.copy(this.matrixWorld,t.matrixWorld),!0===n)for(var e=0;e<t.children.length;e++){const n=t.children[e];this.add(n.clone())}return this}}{constructor(t){super(),this.nodeId=t}copy(t){return this.name=t.name,this.nodeId=t.nodeId,a.copy(this.position,t.position),i.copy(this.rotation,t.rotation),a.copy(this.scale,t.scale),this.matrix=r.copy(this.matrix,t.matrix),this.matrixWorld=r.copy(this.matrixWorld,t.matrixWorld),this.children=[],this.parent=null,this}}const fe=1313821514,he=5130562;let le=new TextDecoder;function de(t){return le.decode(t)}class me{constructor(t){const n=new DataView(t,0,12),e=new DataView(t,12),r=de(new Uint8Array(t,0,4)),a=n.getUint32(4,!0);n.getUint32(8,!0);if("glTF"!==r)throw new Error("Unsupported glTF-Binary header.");if(a<2)throw new Error("Unsupported legacy binary file detected.");let o=0;for(;o<e.byteLength;){const n=e.getUint32(o,!0);o+=4;const r=e.getUint32(o,!0);switch(o+=4,r){case fe:{const e=new Uint8Array(t,12+o,n);this.json=de(e)}break;case he:{const e=12+o;this.binaryChunk=new Uint8Array(t,e,n)}break;default:console.warn("Skipping unexpected glTF-Binary chunk type:",r)}o+=n}y(!!this.json,"glTF-Binary: JSON content not found.")}}class pe{constructor(t,n){this.gltf=t,this.bufferData=n}bufferViewData(t){if(!this.gltf.bufferViews)throw new Error("No buffer views found.");const n=this.gltf.bufferViews[t],e=v(this.bufferData[n.buffer],`No data for buffer ${n.buffer}`),r=n.byteLength||0,a=n.byteOffset||0,o=e.buffer,i=e.byteOffset;return new Uint8Array(o,i+a,r)}accessorData(t){if(!this.gltf.accessors)throw new Error("No accessors views found.");const n=this.gltf.accessors[t],e=we[n.type];let r;const a=ve[n.componentType],o=a.BYTES_PER_ELEMENT*e*n.count;if(void 0!==n.bufferView){const t=this.bufferViewData(n.bufferView);r=new a(t.buffer,t.byteOffset+T(n.byteOffset,0),n.count*e)}else r=new a(o);if(n.sparse){const{count:t,indices:a,values:o}=n.sparse;let i=ve[a.componentType],u=this.bufferViewData(a.bufferView);const s=new i(u.buffer,u.byteOffset+(a.byteOffset||0),t);i=ve[n.componentType],u=this.bufferViewData(o.bufferView);const c=new i(this.bufferViewData(o.bufferView).buffer,u.byteOffset+(o.byteOffset||0),t*e);n.bufferView&&(r=new Uint8Array(r));const f=new ve[n.componentType](r.buffer);for(let n=0;n<t;n++)for(let t=0;t<e;t++)f[e*s[n]+t]=c[e*n+t]}return r}}function Me(t,n){let e;switch(n){case 5120:e=s.Char;break;case 5121:e=s.Uchar;break;case 5122:e=s.Short;break;case 5123:e=s.Ushort;break;case 5125:e=s.Uint;break;case 5126:e=s.Float;break;default:throw new Error("Invalid GLTF component type")}switch(t){case"SCALAR":e+=0;break;case"VEC2":e+=1;break;case"VEC3":e+=2;break;case"VEC4":e+=3;break;case"MAT2":throw new Error("2x2 Matrice not yet supported");case"MAT3":e=s.Float3x3;break;case"MAT4":e=s.Float4x4}return e}function be(t){switch(t){case 5124:return s.Int;case 5126:return s.Float;case 35664:return s.Float2;case 35665:return s.Float3;case 35666:return s.Float4;case 35667:return s.Int2;case 35668:return s.Int3;case 35669:return s.Int4;case 35675:return s.Float3x3;case 35676:return s.Float4x4;case 35678:return s.Texture2D;default:throw new Error("Invalid GLTF component type")}}function ge(t){switch(t){case 0:return d.Points;case 1:return d.Lines;case 2:return d.LineLoop;case 3:return d.LineStrip;case 4:return d.Triangles;case 5:return d.TriangleStrip;case 6:return d.TriangleFan;default:throw new Error("Invalid GLTF primitive mode")}}const xe={9728:h.Nearest,9729:h.Linear},ye={9728:h.Nearest,9729:h.Linear},ve={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},we={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Te={POSITION:"a_pos",NORMAL:"a_normal",TANGENT:"a_tangent",JOINTS_0:"a_joints",WEIGHTS_0:"a_weights",COLOR_0:"a_color",TEXCOORD_0:"a_uv0",TEXCOORD_1:"a_uv1",MORPH0_POSITION:"a_posMorph0"},Ue={NORMAL:"HAS_NORMALS 1",TANGENT:"HAS_TANGENT 1",JOINTS_0:"HAS_JOINT_SET0 1",WEIGHTS_0:"HAS_WEIGHT_SET0 1",COLOR_0:"HAS_COLOR0 1",TEXCOORD_0:"HAS_UV_SET0 1",TEXCOORD_1:"HAS_UV_SET1 1"};function Se(t,n,e){const r=e,a=n.gltf;let o;if(!w(e.material))throw new Error("Default material not yet supported");o=v(t.materials[e.material]);const i=[];let u=void 0;const s=[];if(w(r.indices)){const e=v(a.accessors)[r.indices];u=_e(t,n,v(e.bufferView),m.Index)}const c=Te;if(w(o.technique)){const t=Object.keys(o.technique.attributes);for(const n of t){c[o.technique.attributes[n].semantic]=n}}const f={buffers:[]},h={};for(let e in r.attributes){const o=v(a.accessors)[r.attributes[e]],u=v(o.bufferView,"Undefined accessor buffers are not yet implemented"),c=h[u];let l;if(w(c))l=f.buffers[c];else{h[u]=s.length;const e=_e(t,n,u,m.Vertex);l={stride:T(v(a.bufferViews)[u].byteStride,0),layout:{}},s.push(e),f.buffers.push(l)}const d=Ue[e];w(d)&&i.push(d);const p=Te[e];l.layout[p]={type:Me(o.type,o.componentType),offset:o.byteOffset||0}}if(r.targets){i.push("HAS_MORPH0 1"),y(1===r.targets.length,"Only 1 morph target is currently supported");const e=r.targets[0];for(let r in e)if("POSITION"===r){const o=v(a.accessors)[e[r]],i=v(o.bufferView,"Undefined accessor buffers are not yet implemented"),u=v(a.bufferViews)[i];let c=f.buffers[i];const h=_e(t,n,i,m.Vertex);w(c)||(s[i]=h,c=f.buffers[i]={stride:T(u.byteStride,0),layout:{}});const l=Te[`MORPH0_${r}`];c.layout[l]={type:Me(o.type,o.componentType),offset:o.byteOffset||0}}}const l=a.accessors[v(r.indices,"Only indexed primitives are currently supported")],d=v(u,"Only indexed primitives are currently supported");return{elementCount:l.count,vertexBuffers:s,type:ge(T(r.mode,4)),indexType:Me(l.type,l.componentType),indexBuffer:d,vertexLayout:f,material:o}}function _e(t,n,e,r){if(w(t.bufferViews[e]))return t.bufferViews[e];const a=v(n.gltf.bufferViews)[e].name||`buffer${e}`;t.bufferData[e]=new Uint8Array(n.bufferViewData(e)).buffer,t.transferList.push(t.bufferData[e]);const o={name:a,type:r,id:-1};return t.bufferViews[e]=o,o}const Fe=self,Ie={texture:new class{async loadAsync(t){const n=await fetch(t.source.uri);if(200!=n.status)throw new Error("Failed to download image");const e=t.source.uri.match(/.*\/(.+?)\./);t.name=e&&e.length>1?e[1]:"Unknown",self.createImageBitmap?(t.imageBitmap=await createImageBitmap(await n.blob()),t.transferList.push(t.imageBitmap),t.status=o.LoadingSync):(t.imageBuffer=await n.arrayBuffer(),t.transferList.push(t.imageBuffer),t.status=o.LoadingSync)}loadSync(t,n){if(n.imageBitmap)n.texture=t.renderer.createTexture(n.name,{usage:M.Static,type:c.Texture2D,format:f.U8x3,maxAnistropy:16},n.imageBitmap),n.imageBitmap.close(),delete n.imageBitmap,n.status=o.Loaded;else{if(n.imageBuffer){var e=new Blob([n.imageBuffer],{type:"image/jpeg"});let t=window.URL.createObjectURL(e);delete n.imageBuffer,n.imageElement=new Image,n.imageElement.src=t,n.status=o.LoadingSync}w(n.imageElement)&&n.imageElement.complete&&(n.texture=t.renderer.createTexture(n.name,{usage:M.Static,type:c.Texture2D,format:f.U8x3,maxAnistropy:16},n.imageElement),delete n.imageElement,n.status=o.Loaded)}}unloadSync(t,n){w(n.texture)&&t.renderer.removeTexture(n.texture),w(n.imageBitmap)&&n.imageBitmap.close()}},gltf:new class{async loadAsync(t){const n=await fetch(t.source.uri);if(200!=n.status)throw new Error("Failed to download GLTF");const e=await n.arrayBuffer(),u=new me(e),s=JSON.parse(u.json),h=new pe(s,[u.binaryChunk]);t.nodes=[],t.meshes=[],t.materials=[],t.textures=[],t.bufferViews=[],t.animations=[],t.rootNodeIds=[],t.imageData=[],t.bufferData=[];const l=function(t,n){const e=T(n.gltf.images,[]),r=T(n.gltf.textures,[]),a=T(n.gltf.samplers,[]),o=[];t.textures=[],t.imageData=[];const i={type:c.Texture2D,format:f.U8x4,usage:M.Static},u={wrapS:10497,wrapT:10497};for(let r=0;r<e.length;r++){const a=v(e[r]),i=v(a.bufferView,"Image loading from a URI is not yet supported"),u=n.bufferViewData(i);let s;if(w(self.createImageBitmap)){const t=new Blob([u],{type:v(a.mimeType)});s=createImageBitmap(t)}else s=Promise.resolve(u.buffer);o.push(s.then(n=>{t.transferList.push(n),t.imageData[r]=n}))}return t.textures=r.map(t=>{const n=T(a[t.sampler],u),e=Object.assign({},i);return w(n.magFilter)&&(e.defaultMagFilter=xe[n.magFilter],w(e.defaultMagFilter)||console.warn(`Unsupported texture mag filter: ${n.magFilter}`)),w(n.minFilter)&&(e.defaultMagFilter=ye[n.minFilter],w(e.defaultMagFilter)||console.warn(`Unsupported texture min filter: ${n.magFilter}`)),(w(n.wrapS)||w(n.wrapT))&&(w(e.defaultMagFilter)||console.warn(`Texture wrapping not yet supported: ${n.magFilter}`)),{name:t.name,desc:e,imageIndex:v(t.source),id:-1}}),o}(t,h);!function(t,n){var e;if(!(null===(e=n.gltf.extensionsUsed)||void 0===e?void 0:e.includes("KHR_techniques_webgl")))return;const r=v(n.gltf.extensions.KHR_techniques_webgl);t.shaderData=r.shaders.map((e,r)=>{const a=v(e.bufferView,"Shader loading from URI not yet supported"),o=new Uint8Array(n.bufferViewData(a)).buffer;return t.transferList.push(o),o}),t.shaders=r.programs.map(t=>({id:-1,name:t.name,fsIndex:t.fragmentShader,vsIndex:t.vertexShader})),t.techniques=r.techniques.map((n,e)=>{const r={};for(const t in T(n.uniforms,{})){const e=n.uniforms[t];r[t]=Object.assign(Object.assign({},e),{type:be(e.type)})}return{shader:t.shaders[n.program],attributes:T(n.attributes,{}),uniforms:r}})}(t,h),function(t,n){const e=T(n.gltf.materials,[]);t.materials=[],t.materials=e.map((n,e)=>{var r;const a={name:T(n.name,`Material${e}`),renderFormat:{blendingEnabled:!1},cullMode:n.doubleSided?b.None:b.Back},o=null===(r=n.extensions)||void 0===r?void 0:r.KHR_techniques_webgl;return w(o)&&(a.technique=t.techniques[o.technique],a.values=o.values),a})}(t,h),function(t,n){const e=T(n.gltf.meshes,[]);t.meshes=[];for(let r=0;r<e.length;r++){const a=v(e[r]),o=[];for(let e of a.primitives)o.push(Se(t,n,e));const i={name:a.name,id:r,primitives:o};t.meshes[r]=i}}(t,h),function(t,n){const e=T(n.gltf.nodes,[]);t.nodes=[];for(let o=0;o<e.length;o++){const u=v(e[o]),s=T(u.scale,[1,1,1]),c=T(u.rotation,[0,0,0,1]),f=T(u.translation,[0,0,0]),h={name:u.name,scale:a.fromValues(s[0],s[1],s[2]),rotation:i.fromValues(c[0],c[1],c[2],c[3]),translation:a.fromValues(f[0],f[1],f[2]),morphWeight:T(u.weights,[0])[0]};if(w(u.matrix)?(h.transform=new Float32Array(u.matrix),r.getRotation(h.rotation,h.transform),r.getTranslation(h.translation,h.transform),r.getScaling(h.scale,h.transform)):h.transform=r.fromRotationTranslationScale(r.create(),h.rotation,h.translation,h.scale),w(u.mesh)&&(h.meshId=u.mesh),w(u.skin)&&(h.skinId=u.skin),w(u.children)){h.children=[];for(let t=0;t<u.children.length;t++){const e=u.children[t];v(n.gltf.nodes)[e];h.children.push(e)}}t.nodes.push(h)}}(t,h),function(t,n){const e=T(n.gltf.skins,[]),r=T(t.nodes,[]);t.skins=[];for(let a=0;a<e.length;a++){const o=e[a],i=[],u=[];for(let t=0;t<o.joints.length;t++){const n=o.joints[t],e=r[n],a=new ce(n);a.name=T(e.name,`Bone${n}`),a.position=e.translation,a.rotation=e.rotation,a.scale=e.scale,i.push(a)}for(let t=0;t<o.joints.length;t++){const n=r[o.joints[t]];if(n.children)for(let e of n.children){const n=i.find(t=>t.nodeId===e);w(n)&&(n.parent=i[t],i[t].children.push(n))}}if(w(o.inverseBindMatrices)){const e=n.accessorData(o.inverseBindMatrices);t.transferList.push(e.buffer);for(let t=0;t<o.joints.length;t++)u[t]=e.subarray(16*t,16*t+16)}t.skins[a]={name:o.name,skeleton:o.skeleton,bones:i,inverseBindMatrices:u}}}(t,h),function(t,n){const e=T(n.gltf.scene,0);if(w(e)){const r=v(n.gltf.scenes),a=v(r[e]);t.rootNodeIds=T(a.nodes,[])}}(t,h),function(t,n){const e=T(n.gltf.animations,[]);t.animations=[];for(let r=0;r<e.length;r++){const a=e[r],o=a.samplers.map(t=>(y(5126===n.gltf.accessors[t.input].componentType,"Non-float animation time type unsupported"),y(5126===n.gltf.accessors[t.output].componentType,"Non-float animation time type unsupported"),{times:n.accessorData(t.input),floats:n.accessorData(t.output)})),i=[],u=[],s=[],c=[];a.channels.forEach(t=>{const n={nodeId:v(t.target.node),times:o[t.sampler].times,values:o[t.sampler].floats};switch(t.target.path){case"translation":i.push(n);break;case"rotation":u.push(n);break;case"scale":s.push(n);break;case"weight":c.push(n)}});const f=Math.max(...a.samplers.map(t=>v(n.gltf.accessors[t.input].max)[0]));t.animations.push({name:a.name,maxTime:f,scales:s,rotations:u,translations:i,weights:c})}}(t,h),await Promise.all(l),t.status=o.LoadingSync}loadSync(t,n){for(let e in n.bufferData){const r=n.bufferViews[e],a=n.bufferData[e];r.id=t.renderer.createBuffer(r.name,r.type,M.Static,a)}for(const e of T(n.shaders,[])){const r=n.shaderData[e.vsIndex],a=n.shaderData[e.fsIndex],o={name:e.name,vertSource:de(r),fragSource:de(a)};e.id=t.renderer.createShader(o)}if(w(self.createImageBitmap)){for(const e of n.textures){const r=n.imageData[e.imageIndex];y(r instanceof ImageBitmap),e.id=t.renderer.createTexture(e.name,e.desc,r)}for(const t of n.imageData)t.close();delete n.imageData,n.status=o.Loaded}else{let r=0;for(const a of n.textures){const i=n.imageData[a.imageIndex];if(-1===a.id){if(i instanceof ArrayBuffer){var e=new Blob([i],{type:"image/jpeg"});let t=window.URL.createObjectURL(e);n.imageData[a.imageIndex]=new Image,n.imageData[a.imageIndex].src=t,n.status=o.LoadingSync}n.imageData[a.imageIndex].complete&&(a.id=t.renderer.createTexture(a.name,{usage:M.Static,type:c.Texture2D,format:f.U8x3,maxAnistropy:16},n.imageData[a.imageIndex]))}else r+=1}r===n.textures.length&&(delete n.imageData,n.status=o.Loaded)}}unloadSync(t,n){}}};onmessage=async t=>{De.onMessage(t)};class Ae{constructor(){this.processed=[],setInterval(()=>this.update(),Ae.kTickIntervalMs)}async onMessage(t){const n=t.data;for(let t of n){const n=Ie[t.source.type];if(n||(t.status=o.Failed),t.status===o.LoadingAsync)try{await n.loadAsync(t)}catch(n){t.status=o.Failed,t.error=n.stack}this.processed.push(t)}}update(){if(this.processed.length>0){const t=[];for(let n of this.processed)Array.prototype.push.apply(t,n.transferList);Fe.postMessage(this.processed,t),this.processed.length=0}}}Ae.kTickIntervalMs=33;const De=new Ae;n.default={}}});