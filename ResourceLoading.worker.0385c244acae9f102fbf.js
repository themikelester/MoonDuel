!function(t){var n={};function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)e.d(r,a,function(n){return t[n]}.bind(null,a));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=4)}({4:function(t,n,e){"use strict";e.r(n);var r={};e.r(r),e.d(r,"create",(function(){return F})),e.d(r,"clone",(function(){return I})),e.d(r,"copy",(function(){return A})),e.d(r,"fromValues",(function(){return L})),e.d(r,"set",(function(){return D})),e.d(r,"identity",(function(){return N})),e.d(r,"transpose",(function(){return O})),e.d(r,"invert",(function(){return E})),e.d(r,"adjoint",(function(){return V})),e.d(r,"determinant",(function(){return q})),e.d(r,"multiply",(function(){return B})),e.d(r,"translate",(function(){return R})),e.d(r,"scale",(function(){return k})),e.d(r,"rotate",(function(){return C})),e.d(r,"rotateX",(function(){return H})),e.d(r,"rotateY",(function(){return P})),e.d(r,"rotateZ",(function(){return j})),e.d(r,"fromTranslation",(function(){return G})),e.d(r,"fromScaling",(function(){return $})),e.d(r,"fromRotation",(function(){return X})),e.d(r,"fromXRotation",(function(){return W})),e.d(r,"fromYRotation",(function(){return Z})),e.d(r,"fromZRotation",(function(){return J})),e.d(r,"fromRotationTranslation",(function(){return Y})),e.d(r,"fromQuat2",(function(){return z})),e.d(r,"getTranslation",(function(){return K})),e.d(r,"getScaling",(function(){return Q})),e.d(r,"getRotation",(function(){return tt})),e.d(r,"fromRotationTranslationScale",(function(){return nt})),e.d(r,"fromRotationTranslationScaleOrigin",(function(){return et})),e.d(r,"fromQuat",(function(){return rt})),e.d(r,"frustum",(function(){return at})),e.d(r,"perspective",(function(){return ot})),e.d(r,"perspectiveFromFieldOfView",(function(){return ut})),e.d(r,"ortho",(function(){return it})),e.d(r,"lookAt",(function(){return st})),e.d(r,"targetTo",(function(){return ct})),e.d(r,"str",(function(){return ft})),e.d(r,"frob",(function(){return ht})),e.d(r,"add",(function(){return lt})),e.d(r,"subtract",(function(){return dt})),e.d(r,"multiplyScalar",(function(){return mt})),e.d(r,"multiplyScalarAndAdd",(function(){return Mt})),e.d(r,"exactEquals",(function(){return pt})),e.d(r,"equals",(function(){return bt})),e.d(r,"mul",(function(){return gt})),e.d(r,"sub",(function(){return yt}));var a={};e.r(a),e.d(a,"create",(function(){return xt})),e.d(a,"clone",(function(){return vt})),e.d(a,"length",(function(){return wt})),e.d(a,"fromValues",(function(){return Tt})),e.d(a,"copy",(function(){return Ut})),e.d(a,"set",(function(){return St})),e.d(a,"add",(function(){return _t})),e.d(a,"subtract",(function(){return Ft})),e.d(a,"multiply",(function(){return It})),e.d(a,"divide",(function(){return At})),e.d(a,"ceil",(function(){return Lt})),e.d(a,"floor",(function(){return Dt})),e.d(a,"min",(function(){return Nt})),e.d(a,"max",(function(){return Ot})),e.d(a,"round",(function(){return Et})),e.d(a,"scale",(function(){return Vt})),e.d(a,"scaleAndAdd",(function(){return qt})),e.d(a,"distance",(function(){return Bt})),e.d(a,"squaredDistance",(function(){return Rt})),e.d(a,"squaredLength",(function(){return kt})),e.d(a,"negate",(function(){return Ct})),e.d(a,"inverse",(function(){return Ht})),e.d(a,"normalize",(function(){return Pt})),e.d(a,"dot",(function(){return jt})),e.d(a,"cross",(function(){return Gt})),e.d(a,"lerp",(function(){return $t})),e.d(a,"hermite",(function(){return Xt})),e.d(a,"bezier",(function(){return Wt})),e.d(a,"random",(function(){return Zt})),e.d(a,"transformMat4",(function(){return Jt})),e.d(a,"transformMat3",(function(){return Yt})),e.d(a,"transformQuat",(function(){return zt})),e.d(a,"rotateX",(function(){return Kt})),e.d(a,"rotateY",(function(){return Qt})),e.d(a,"rotateZ",(function(){return tn})),e.d(a,"angle",(function(){return nn})),e.d(a,"zero",(function(){return en})),e.d(a,"str",(function(){return rn})),e.d(a,"exactEquals",(function(){return an})),e.d(a,"equals",(function(){return on})),e.d(a,"sub",(function(){return sn})),e.d(a,"mul",(function(){return cn})),e.d(a,"div",(function(){return fn})),e.d(a,"dist",(function(){return hn})),e.d(a,"sqrDist",(function(){return ln})),e.d(a,"len",(function(){return dn})),e.d(a,"sqrLen",(function(){return mn})),e.d(a,"forEach",(function(){return Mn}));var o,u={};e.r(u),e.d(u,"create",(function(){return gn})),e.d(u,"identity",(function(){return yn})),e.d(u,"setAxisAngle",(function(){return xn})),e.d(u,"getAxisAngle",(function(){return vn})),e.d(u,"getAngle",(function(){return wn})),e.d(u,"multiply",(function(){return Tn})),e.d(u,"rotateX",(function(){return Un})),e.d(u,"rotateY",(function(){return Sn})),e.d(u,"rotateZ",(function(){return _n})),e.d(u,"calculateW",(function(){return Fn})),e.d(u,"exp",(function(){return In})),e.d(u,"ln",(function(){return An})),e.d(u,"pow",(function(){return Ln})),e.d(u,"slerp",(function(){return Dn})),e.d(u,"random",(function(){return Nn})),e.d(u,"invert",(function(){return On})),e.d(u,"conjugate",(function(){return En})),e.d(u,"fromMat3",(function(){return Vn})),e.d(u,"fromEuler",(function(){return qn})),e.d(u,"str",(function(){return Bn})),e.d(u,"clone",(function(){return $n})),e.d(u,"fromValues",(function(){return Xn})),e.d(u,"copy",(function(){return Wn})),e.d(u,"set",(function(){return Zn})),e.d(u,"add",(function(){return Jn})),e.d(u,"mul",(function(){return Yn})),e.d(u,"scale",(function(){return zn})),e.d(u,"dot",(function(){return Kn})),e.d(u,"lerp",(function(){return Qn})),e.d(u,"length",(function(){return te})),e.d(u,"len",(function(){return ne})),e.d(u,"squaredLength",(function(){return ee})),e.d(u,"sqrLen",(function(){return re})),e.d(u,"normalize",(function(){return ae})),e.d(u,"exactEquals",(function(){return oe})),e.d(u,"equals",(function(){return ue})),e.d(u,"rotationTo",(function(){return ie})),e.d(u,"sqlerp",(function(){return se})),e.d(u,"setAxes",(function(){return ce})),function(t){t[t.LoadingAsync=0]="LoadingAsync",t[t.LoadingSync=1]="LoadingSync",t[t.Loaded=2]="Loaded",t[t.Unloaded=3]="Unloaded",t[t.Failed=4]="Failed"}(o||(o={}));var i,s,c,f,h,l,d,m,M,p,b,g,y;function x(t,n=""){if(!t){const t=new Error(`Assert fail: ${n}`);throw console.error(t.stack),t}}function v(t,n){if(null!=t)return t;throw new Error(T(n,"Missing object"))}function w(t){return null!=t}function T(t,n){return null!=t?t:n}!function(t){t[t.VertexArrayObject=1]="VertexArrayObject",t[t.TextureFloat=2]="TextureFloat",t[t.TextureHalf=4]="TextureHalf",t[t.TextureFloatLinearFiltering=8]="TextureFloatLinearFiltering",t[t.TextureHalfLinearFiltering=16]="TextureHalfLinearFiltering",t[t.TextureWrite=32]="TextureWrite",t[t.ShaderDerivatives=64]="ShaderDerivatives",t[t.Instancing=128]="Instancing",t[t.AnistropicFiltering=256]="AnistropicFiltering"}(i||(i={})),function(t){t[t.Undefined=0]="Undefined",t[t.Float=1]="Float",t[t.Float2=2]="Float2",t[t.Float3=3]="Float3",t[t.Float4=4]="Float4",t[t.Int=5]="Int",t[t.Int2=6]="Int2",t[t.Int3=7]="Int3",t[t.Int4=8]="Int4",t[t.Uint=9]="Uint",t[t.Uint2=10]="Uint2",t[t.Uint3=11]="Uint3",t[t.Uint4=12]="Uint4",t[t.Short=13]="Short",t[t.Short2=14]="Short2",t[t.Short3=15]="Short3",t[t.Short4=16]="Short4",t[t.Ushort=17]="Ushort",t[t.Ushort2=18]="Ushort2",t[t.Ushort3=19]="Ushort3",t[t.Ushort4=20]="Ushort4",t[t.Char=21]="Char",t[t.Char2=22]="Char2",t[t.Char3=23]="Char3",t[t.Char4=24]="Char4",t[t.Uchar=25]="Uchar",t[t.Uchar2=26]="Uchar2",t[t.Uchar3=27]="Uchar3",t[t.Uchar4=28]="Uchar4",t[t.Half=29]="Half",t[t.Half2=30]="Half2",t[t.Half3=31]="Half3",t[t.Half4=32]="Half4",t[t.Float3x3=33]="Float3x3",t[t.Float3x4=34]="Float3x4",t[t.Float4x4=35]="Float4x4",t[t.Texture2D=240]="Texture2D",t[t.Texture3D=241]="Texture3D",t[t.TextureCube=242]="TextureCube",t[t.Short_Norm=256]="Short_Norm",t[t.Short2_Norm=257]="Short2_Norm",t[t.Short3_Norm=258]="Short3_Norm",t[t.Short4_Norm=259]="Short4_Norm",t[t.Ushort_Norm=260]="Ushort_Norm",t[t.Ushort2_Norm=261]="Ushort2_Norm",t[t.Ushort3_Norm=262]="Ushort3_Norm",t[t.Ushort4_Norm=263]="Ushort4_Norm",t[t.Char_Norm=264]="Char_Norm",t[t.Char2_Norm=265]="Char2_Norm",t[t.Char3_Norm=266]="Char3_Norm",t[t.Char4_Norm=267]="Char4_Norm",t[t.Uchar_Norm=268]="Uchar_Norm",t[t.Uchar2_Norm=269]="Uchar2_Norm",t[t.Uchar3_Norm=270]="Uchar3_Norm",t[t.Uchar4_Norm=271]="Uchar4_Norm"}(s||(s={})),function(t){t[t.Texture2D=240]="Texture2D",t[t.Texture3D=241]="Texture3D",t[t.TextureCube=242]="TextureCube"}(c||(c={})),function(t){t[t.Undefined=0]="Undefined",t[t.U565=1]="U565",t[t.U8=2]="U8",t[t.U8_sRGB=3]="U8_sRGB",t[t.U8x2=4]="U8x2",t[t.U8x2_sRGB=5]="U8x2_sRGB",t[t.U8x3=6]="U8x3",t[t.U8x3_sRGB=7]="U8x3_sRGB",t[t.U8x4=8]="U8x4",t[t.U8x4_sRGB=9]="U8x4_sRGB",t[t.U10_10_10_2=10]="U10_10_10_2",t[t.F11_11_10=11]="F11_11_10",t[t.F16=12]="F16",t[t.F16x2=13]="F16x2",t[t.F16x3=14]="F16x3",t[t.F16x4=15]="F16x4",t[t.F32x2=16]="F32x2",t[t.F32x3=17]="F32x3",t[t.F32x4=18]="F32x4",t[t.Depth32=19]="Depth32",t[t.Depth24Stencil8=20]="Depth24Stencil8"}(f||(f={})),function(t){t[t.Nearest=0]="Nearest",t[t.Linear=1]="Linear"}(h||(h={})),function(t){t[t.Never=0]="Never",t[t.Less=1]="Less",t[t.Equal=2]="Equal",t[t.LessEqual=3]="LessEqual",t[t.Greater=4]="Greater",t[t.NotEqual=5]="NotEqual",t[t.GreaterEqual=6]="GreaterEqual",t[t.Always=7]="Always"}(l||(l={})),function(t){t[t.Points=0]="Points",t[t.Lines=1]="Lines",t[t.LineLoop=2]="LineLoop",t[t.LineStrip=3]="LineStrip",t[t.Triangles=4]="Triangles",t[t.TriangleStrip=5]="TriangleStrip",t[t.TriangleFan=6]="TriangleFan"}(d||(d={})),function(t){t[t.Undefined=0]="Undefined",t[t.Uniform=1]="Uniform",t[t.Vertex=2]="Vertex",t[t.Index=3]="Index",t[t.Readback=4]="Readback"}(m||(m={})),function(t){t[t.Undefined=0]="Undefined",t[t.UniformBuffer=1]="UniformBuffer",t[t.Texture=2]="Texture"}(M||(M={})),function(t){t[t.None=0]="None",t[t.Static=1]="Static",t[t.Dynamic=2]="Dynamic"}(p||(p={})),function(t){t[t.None=0]="None",t[t.Back=1]="Back",t[t.Front=2]="Front"}(b||(b={})),function(t){t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Source=2]="Source",t[t.OneMinusSource=3]="OneMinusSource"}(g||(g={})),function(t){t[t.Vertex=0]="Vertex",t[t.Instance=1]="Instance"}(y||(y={}));var U=1e-6,S="undefined"!=typeof Float32Array?Float32Array:Array,_=Math.random;Math.PI;function F(){var t=new S(16);return S!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function I(t){var n=new S(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function A(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function L(t,n,e,r,a,o,u,i,s,c,f,h,l,d,m,M){var p=new S(16);return p[0]=t,p[1]=n,p[2]=e,p[3]=r,p[4]=a,p[5]=o,p[6]=u,p[7]=i,p[8]=s,p[9]=c,p[10]=f,p[11]=h,p[12]=l,p[13]=d,p[14]=m,p[15]=M,p}function D(t,n,e,r,a,o,u,i,s,c,f,h,l,d,m,M,p){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t[4]=o,t[5]=u,t[6]=i,t[7]=s,t[8]=c,t[9]=f,t[10]=h,t[11]=l,t[12]=d,t[13]=m,t[14]=M,t[15]=p,t}function N(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O(t,n){if(t===n){var e=n[1],r=n[2],a=n[3],o=n[6],u=n[7],i=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=o,t[11]=n[14],t[12]=a,t[13]=u,t[14]=i}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}function E(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],u=n[4],i=n[5],s=n[6],c=n[7],f=n[8],h=n[9],l=n[10],d=n[11],m=n[12],M=n[13],p=n[14],b=n[15],g=e*i-r*u,y=e*s-a*u,x=e*c-o*u,v=r*s-a*i,w=r*c-o*i,T=a*c-o*s,U=f*M-h*m,S=f*p-l*m,_=f*b-d*m,F=h*p-l*M,I=h*b-d*M,A=l*b-d*p,L=g*A-y*I+x*F+v*_-w*S+T*U;return L?(L=1/L,t[0]=(i*A-s*I+c*F)*L,t[1]=(a*I-r*A-o*F)*L,t[2]=(M*T-p*w+b*v)*L,t[3]=(l*w-h*T-d*v)*L,t[4]=(s*_-u*A-c*S)*L,t[5]=(e*A-a*_+o*S)*L,t[6]=(p*x-m*T-b*y)*L,t[7]=(f*T-l*x+d*y)*L,t[8]=(u*I-i*_+c*U)*L,t[9]=(r*_-e*I-o*U)*L,t[10]=(m*w-M*x+b*g)*L,t[11]=(h*x-f*w-d*g)*L,t[12]=(i*S-u*F-s*U)*L,t[13]=(e*F-r*S+a*U)*L,t[14]=(M*y-m*v-p*g)*L,t[15]=(f*v-h*y+l*g)*L,t):null}function V(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],u=n[4],i=n[5],s=n[6],c=n[7],f=n[8],h=n[9],l=n[10],d=n[11],m=n[12],M=n[13],p=n[14],b=n[15];return t[0]=i*(l*b-d*p)-h*(s*b-c*p)+M*(s*d-c*l),t[1]=-(r*(l*b-d*p)-h*(a*b-o*p)+M*(a*d-o*l)),t[2]=r*(s*b-c*p)-i*(a*b-o*p)+M*(a*c-o*s),t[3]=-(r*(s*d-c*l)-i*(a*d-o*l)+h*(a*c-o*s)),t[4]=-(u*(l*b-d*p)-f*(s*b-c*p)+m*(s*d-c*l)),t[5]=e*(l*b-d*p)-f*(a*b-o*p)+m*(a*d-o*l),t[6]=-(e*(s*b-c*p)-u*(a*b-o*p)+m*(a*c-o*s)),t[7]=e*(s*d-c*l)-u*(a*d-o*l)+f*(a*c-o*s),t[8]=u*(h*b-d*M)-f*(i*b-c*M)+m*(i*d-c*h),t[9]=-(e*(h*b-d*M)-f*(r*b-o*M)+m*(r*d-o*h)),t[10]=e*(i*b-c*M)-u*(r*b-o*M)+m*(r*c-o*i),t[11]=-(e*(i*d-c*h)-u*(r*d-o*h)+f*(r*c-o*i)),t[12]=-(u*(h*p-l*M)-f*(i*p-s*M)+m*(i*l-s*h)),t[13]=e*(h*p-l*M)-f*(r*p-a*M)+m*(r*l-a*h),t[14]=-(e*(i*p-s*M)-u*(r*p-a*M)+m*(r*s-a*i)),t[15]=e*(i*l-s*h)-u*(r*l-a*h)+f*(r*s-a*i),t}function q(t){var n=t[0],e=t[1],r=t[2],a=t[3],o=t[4],u=t[5],i=t[6],s=t[7],c=t[8],f=t[9],h=t[10],l=t[11],d=t[12],m=t[13],M=t[14],p=t[15];return(n*u-e*o)*(h*p-l*M)-(n*i-r*o)*(f*p-l*m)+(n*s-a*o)*(f*M-h*m)+(e*i-r*u)*(c*p-l*d)-(e*s-a*u)*(c*M-h*d)+(r*s-a*i)*(c*m-f*d)}function B(t,n,e){var r=n[0],a=n[1],o=n[2],u=n[3],i=n[4],s=n[5],c=n[6],f=n[7],h=n[8],l=n[9],d=n[10],m=n[11],M=n[12],p=n[13],b=n[14],g=n[15],y=e[0],x=e[1],v=e[2],w=e[3];return t[0]=y*r+x*i+v*h+w*M,t[1]=y*a+x*s+v*l+w*p,t[2]=y*o+x*c+v*d+w*b,t[3]=y*u+x*f+v*m+w*g,y=e[4],x=e[5],v=e[6],w=e[7],t[4]=y*r+x*i+v*h+w*M,t[5]=y*a+x*s+v*l+w*p,t[6]=y*o+x*c+v*d+w*b,t[7]=y*u+x*f+v*m+w*g,y=e[8],x=e[9],v=e[10],w=e[11],t[8]=y*r+x*i+v*h+w*M,t[9]=y*a+x*s+v*l+w*p,t[10]=y*o+x*c+v*d+w*b,t[11]=y*u+x*f+v*m+w*g,y=e[12],x=e[13],v=e[14],w=e[15],t[12]=y*r+x*i+v*h+w*M,t[13]=y*a+x*s+v*l+w*p,t[14]=y*o+x*c+v*d+w*b,t[15]=y*u+x*f+v*m+w*g,t}function R(t,n,e){var r,a,o,u,i,s,c,f,h,l,d,m,M=e[0],p=e[1],b=e[2];return n===t?(t[12]=n[0]*M+n[4]*p+n[8]*b+n[12],t[13]=n[1]*M+n[5]*p+n[9]*b+n[13],t[14]=n[2]*M+n[6]*p+n[10]*b+n[14],t[15]=n[3]*M+n[7]*p+n[11]*b+n[15]):(r=n[0],a=n[1],o=n[2],u=n[3],i=n[4],s=n[5],c=n[6],f=n[7],h=n[8],l=n[9],d=n[10],m=n[11],t[0]=r,t[1]=a,t[2]=o,t[3]=u,t[4]=i,t[5]=s,t[6]=c,t[7]=f,t[8]=h,t[9]=l,t[10]=d,t[11]=m,t[12]=r*M+i*p+h*b+n[12],t[13]=a*M+s*p+l*b+n[13],t[14]=o*M+c*p+d*b+n[14],t[15]=u*M+f*p+m*b+n[15]),t}function k(t,n,e){var r=e[0],a=e[1],o=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=n[7]*a,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function C(t,n,e,r){var a,o,u,i,s,c,f,h,l,d,m,M,p,b,g,y,x,v,w,T,S,_,F,I,A=r[0],L=r[1],D=r[2],N=Math.hypot(A,L,D);return N<U?null:(A*=N=1/N,L*=N,D*=N,a=Math.sin(e),u=1-(o=Math.cos(e)),i=n[0],s=n[1],c=n[2],f=n[3],h=n[4],l=n[5],d=n[6],m=n[7],M=n[8],p=n[9],b=n[10],g=n[11],y=A*A*u+o,x=L*A*u+D*a,v=D*A*u-L*a,w=A*L*u-D*a,T=L*L*u+o,S=D*L*u+A*a,_=A*D*u+L*a,F=L*D*u-A*a,I=D*D*u+o,t[0]=i*y+h*x+M*v,t[1]=s*y+l*x+p*v,t[2]=c*y+d*x+b*v,t[3]=f*y+m*x+g*v,t[4]=i*w+h*T+M*S,t[5]=s*w+l*T+p*S,t[6]=c*w+d*T+b*S,t[7]=f*w+m*T+g*S,t[8]=i*_+h*F+M*I,t[9]=s*_+l*F+p*I,t[10]=c*_+d*F+b*I,t[11]=f*_+m*F+g*I,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}function H(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[4],u=n[5],i=n[6],s=n[7],c=n[8],f=n[9],h=n[10],l=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=o*a+c*r,t[5]=u*a+f*r,t[6]=i*a+h*r,t[7]=s*a+l*r,t[8]=c*a-o*r,t[9]=f*a-u*r,t[10]=h*a-i*r,t[11]=l*a-s*r,t}function P(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[0],u=n[1],i=n[2],s=n[3],c=n[8],f=n[9],h=n[10],l=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a-c*r,t[1]=u*a-f*r,t[2]=i*a-h*r,t[3]=s*a-l*r,t[8]=o*r+c*a,t[9]=u*r+f*a,t[10]=i*r+h*a,t[11]=s*r+l*a,t}function j(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[0],u=n[1],i=n[2],s=n[3],c=n[4],f=n[5],h=n[6],l=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a+c*r,t[1]=u*a+f*r,t[2]=i*a+h*r,t[3]=s*a+l*r,t[4]=c*a-o*r,t[5]=f*a-u*r,t[6]=h*a-i*r,t[7]=l*a-s*r,t}function G(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function $(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function X(t,n,e){var r,a,o,u=e[0],i=e[1],s=e[2],c=Math.hypot(u,i,s);return c<U?null:(u*=c=1/c,i*=c,s*=c,r=Math.sin(n),o=1-(a=Math.cos(n)),t[0]=u*u*o+a,t[1]=i*u*o+s*r,t[2]=s*u*o-i*r,t[3]=0,t[4]=u*i*o-s*r,t[5]=i*i*o+a,t[6]=s*i*o+u*r,t[7]=0,t[8]=u*s*o+i*r,t[9]=i*s*o-u*r,t[10]=s*s*o+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function W(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Z(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function J(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Y(t,n,e){var r=n[0],a=n[1],o=n[2],u=n[3],i=r+r,s=a+a,c=o+o,f=r*i,h=r*s,l=r*c,d=a*s,m=a*c,M=o*c,p=u*i,b=u*s,g=u*c;return t[0]=1-(d+M),t[1]=h+g,t[2]=l-b,t[3]=0,t[4]=h-g,t[5]=1-(f+M),t[6]=m+p,t[7]=0,t[8]=l+b,t[9]=m-p,t[10]=1-(f+d),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function z(t,n){var e=new S(3),r=-n[0],a=-n[1],o=-n[2],u=n[3],i=n[4],s=n[5],c=n[6],f=n[7],h=r*r+a*a+o*o+u*u;return h>0?(e[0]=2*(i*u+f*r+s*o-c*a)/h,e[1]=2*(s*u+f*a+c*r-i*o)/h,e[2]=2*(c*u+f*o+i*a-s*r)/h):(e[0]=2*(i*u+f*r+s*o-c*a),e[1]=2*(s*u+f*a+c*r-i*o),e[2]=2*(c*u+f*o+i*a-s*r)),Y(t,n,e),t}function K(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function Q(t,n){var e=n[0],r=n[1],a=n[2],o=n[4],u=n[5],i=n[6],s=n[8],c=n[9],f=n[10];return t[0]=Math.hypot(e,r,a),t[1]=Math.hypot(o,u,i),t[2]=Math.hypot(s,c,f),t}function tt(t,n){var e=new S(3);Q(e,n);var r=1/e[0],a=1/e[1],o=1/e[2],u=n[0]*r,i=n[1]*a,s=n[2]*o,c=n[4]*r,f=n[5]*a,h=n[6]*o,l=n[8]*r,d=n[9]*a,m=n[10]*o,M=u+f+m,p=0;return M>0?(p=2*Math.sqrt(M+1),t[3]=.25*p,t[0]=(h-d)/p,t[1]=(l-s)/p,t[2]=(i-c)/p):u>f&&u>m?(p=2*Math.sqrt(1+u-f-m),t[3]=(h-d)/p,t[0]=.25*p,t[1]=(i+c)/p,t[2]=(l+s)/p):f>m?(p=2*Math.sqrt(1+f-u-m),t[3]=(l-s)/p,t[0]=(i+c)/p,t[1]=.25*p,t[2]=(h+d)/p):(p=2*Math.sqrt(1+m-u-f),t[3]=(i-c)/p,t[0]=(l+s)/p,t[1]=(h+d)/p,t[2]=.25*p),t}function nt(t,n,e,r){var a=n[0],o=n[1],u=n[2],i=n[3],s=a+a,c=o+o,f=u+u,h=a*s,l=a*c,d=a*f,m=o*c,M=o*f,p=u*f,b=i*s,g=i*c,y=i*f,x=r[0],v=r[1],w=r[2];return t[0]=(1-(m+p))*x,t[1]=(l+y)*x,t[2]=(d-g)*x,t[3]=0,t[4]=(l-y)*v,t[5]=(1-(h+p))*v,t[6]=(M+b)*v,t[7]=0,t[8]=(d+g)*w,t[9]=(M-b)*w,t[10]=(1-(h+m))*w,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function et(t,n,e,r,a){var o=n[0],u=n[1],i=n[2],s=n[3],c=o+o,f=u+u,h=i+i,l=o*c,d=o*f,m=o*h,M=u*f,p=u*h,b=i*h,g=s*c,y=s*f,x=s*h,v=r[0],w=r[1],T=r[2],U=a[0],S=a[1],_=a[2],F=(1-(M+b))*v,I=(d+x)*v,A=(m-y)*v,L=(d-x)*w,D=(1-(l+b))*w,N=(p+g)*w,O=(m+y)*T,E=(p-g)*T,V=(1-(l+M))*T;return t[0]=F,t[1]=I,t[2]=A,t[3]=0,t[4]=L,t[5]=D,t[6]=N,t[7]=0,t[8]=O,t[9]=E,t[10]=V,t[11]=0,t[12]=e[0]+U-(F*U+L*S+O*_),t[13]=e[1]+S-(I*U+D*S+E*_),t[14]=e[2]+_-(A*U+N*S+V*_),t[15]=1,t}function rt(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],u=e+e,i=r+r,s=a+a,c=e*u,f=r*u,h=r*i,l=a*u,d=a*i,m=a*s,M=o*u,p=o*i,b=o*s;return t[0]=1-h-m,t[1]=f+b,t[2]=l-p,t[3]=0,t[4]=f-b,t[5]=1-c-m,t[6]=d+M,t[7]=0,t[8]=l+p,t[9]=d-M,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function at(t,n,e,r,a,o,u){var i=1/(e-n),s=1/(a-r),c=1/(o-u);return t[0]=2*o*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(e+n)*i,t[9]=(a+r)*s,t[10]=(u+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*o*2*c,t[15]=0,t}function ot(t,n,e,r,a){var o,u=1/Math.tan(n/2);return t[0]=u/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(o=1/(r-a),t[10]=(a+r)*o,t[14]=2*a*r*o):(t[10]=-1,t[14]=-2*r),t}function ut(t,n,e,r){var a=Math.tan(n.upDegrees*Math.PI/180),o=Math.tan(n.downDegrees*Math.PI/180),u=Math.tan(n.leftDegrees*Math.PI/180),i=Math.tan(n.rightDegrees*Math.PI/180),s=2/(u+i),c=2/(a+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(u-i)*s*.5,t[9]=(a-o)*c*.5,t[10]=r/(e-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*e/(e-r),t[15]=0,t}function it(t,n,e,r,a,o,u){var i=1/(n-e),s=1/(r-a),c=1/(o-u);return t[0]=-2*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(n+e)*i,t[13]=(a+r)*s,t[14]=(u+o)*c,t[15]=1,t}function st(t,n,e,r){var a,o,u,i,s,c,f,h,l,d,m=n[0],M=n[1],p=n[2],b=r[0],g=r[1],y=r[2],x=e[0],v=e[1],w=e[2];return Math.abs(m-x)<U&&Math.abs(M-v)<U&&Math.abs(p-w)<U?N(t):(f=m-x,h=M-v,l=p-w,a=g*(l*=d=1/Math.hypot(f,h,l))-y*(h*=d),o=y*(f*=d)-b*l,u=b*h-g*f,(d=Math.hypot(a,o,u))?(a*=d=1/d,o*=d,u*=d):(a=0,o=0,u=0),i=h*u-l*o,s=l*a-f*u,c=f*o-h*a,(d=Math.hypot(i,s,c))?(i*=d=1/d,s*=d,c*=d):(i=0,s=0,c=0),t[0]=a,t[1]=i,t[2]=f,t[3]=0,t[4]=o,t[5]=s,t[6]=h,t[7]=0,t[8]=u,t[9]=c,t[10]=l,t[11]=0,t[12]=-(a*m+o*M+u*p),t[13]=-(i*m+s*M+c*p),t[14]=-(f*m+h*M+l*p),t[15]=1,t)}function ct(t,n,e,r){var a=n[0],o=n[1],u=n[2],i=r[0],s=r[1],c=r[2],f=a-e[0],h=o-e[1],l=u-e[2],d=f*f+h*h+l*l;d>0&&(f*=d=1/Math.sqrt(d),h*=d,l*=d);var m=s*l-c*h,M=c*f-i*l,p=i*h-s*f;return(d=m*m+M*M+p*p)>0&&(m*=d=1/Math.sqrt(d),M*=d,p*=d),t[0]=m,t[1]=M,t[2]=p,t[3]=0,t[4]=h*p-l*M,t[5]=l*m-f*p,t[6]=f*M-h*m,t[7]=0,t[8]=f,t[9]=h,t[10]=l,t[11]=0,t[12]=a,t[13]=o,t[14]=u,t[15]=1,t}function ft(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function ht(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function lt(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t[9]=n[9]+e[9],t[10]=n[10]+e[10],t[11]=n[11]+e[11],t[12]=n[12]+e[12],t[13]=n[13]+e[13],t[14]=n[14]+e[14],t[15]=n[15]+e[15],t}function dt(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t[9]=n[9]-e[9],t[10]=n[10]-e[10],t[11]=n[11]-e[11],t[12]=n[12]-e[12],t[13]=n[13]-e[13],t[14]=n[14]-e[14],t[15]=n[15]-e[15],t}function mt(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=n[11]*e,t[12]=n[12]*e,t[13]=n[13]*e,t[14]=n[14]*e,t[15]=n[15]*e,t}function Mt(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t[9]=n[9]+e[9]*r,t[10]=n[10]+e[10]*r,t[11]=n[11]+e[11]*r,t[12]=n[12]+e[12]*r,t[13]=n[13]+e[13]*r,t[14]=n[14]+e[14]*r,t[15]=n[15]+e[15]*r,t}function pt(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]}function bt(t,n){var e=t[0],r=t[1],a=t[2],o=t[3],u=t[4],i=t[5],s=t[6],c=t[7],f=t[8],h=t[9],l=t[10],d=t[11],m=t[12],M=t[13],p=t[14],b=t[15],g=n[0],y=n[1],x=n[2],v=n[3],w=n[4],T=n[5],S=n[6],_=n[7],F=n[8],I=n[9],A=n[10],L=n[11],D=n[12],N=n[13],O=n[14],E=n[15];return Math.abs(e-g)<=U*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(r-y)<=U*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(a-x)<=U*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-v)<=U*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(u-w)<=U*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(i-T)<=U*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(s-S)<=U*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(c-_)<=U*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(f-F)<=U*Math.max(1,Math.abs(f),Math.abs(F))&&Math.abs(h-I)<=U*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(l-A)<=U*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(d-L)<=U*Math.max(1,Math.abs(d),Math.abs(L))&&Math.abs(m-D)<=U*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(M-N)<=U*Math.max(1,Math.abs(M),Math.abs(N))&&Math.abs(p-O)<=U*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(b-E)<=U*Math.max(1,Math.abs(b),Math.abs(E))}Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});var gt=B,yt=dt;function xt(){var t=new S(3);return S!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function vt(t){var n=new S(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function wt(t){var n=t[0],e=t[1],r=t[2];return Math.hypot(n,e,r)}function Tt(t,n,e){var r=new S(3);return r[0]=t,r[1]=n,r[2]=e,r}function Ut(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function St(t,n,e,r){return t[0]=n,t[1]=e,t[2]=r,t}function _t(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t}function Ft(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t}function It(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t}function At(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t}function Lt(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t}function Dt(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t}function Nt(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t}function Ot(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t}function Et(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t}function Vt(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t}function qt(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t}function Bt(t,n){var e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2];return Math.hypot(e,r,a)}function Rt(t,n){var e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2];return e*e+r*r+a*a}function kt(t){var n=t[0],e=t[1],r=t[2];return n*n+e*e+r*r}function Ct(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function Ht(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t}function Pt(t,n){var e=n[0],r=n[1],a=n[2],o=e*e+r*r+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o,t}function jt(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Gt(t,n,e){var r=n[0],a=n[1],o=n[2],u=e[0],i=e[1],s=e[2];return t[0]=a*s-o*i,t[1]=o*u-r*s,t[2]=r*i-a*u,t}function $t(t,n,e,r){var a=n[0],o=n[1],u=n[2];return t[0]=a+r*(e[0]-a),t[1]=o+r*(e[1]-o),t[2]=u+r*(e[2]-u),t}function Xt(t,n,e,r,a,o){var u=o*o,i=u*(2*o-3)+1,s=u*(o-2)+o,c=u*(o-1),f=u*(3-2*o);return t[0]=n[0]*i+e[0]*s+r[0]*c+a[0]*f,t[1]=n[1]*i+e[1]*s+r[1]*c+a[1]*f,t[2]=n[2]*i+e[2]*s+r[2]*c+a[2]*f,t}function Wt(t,n,e,r,a,o){var u=1-o,i=u*u,s=o*o,c=i*u,f=3*o*i,h=3*s*u,l=s*o;return t[0]=n[0]*c+e[0]*f+r[0]*h+a[0]*l,t[1]=n[1]*c+e[1]*f+r[1]*h+a[1]*l,t[2]=n[2]*c+e[2]*f+r[2]*h+a[2]*l,t}function Zt(t,n){n=n||1;var e=2*_()*Math.PI,r=2*_()-1,a=Math.sqrt(1-r*r)*n;return t[0]=Math.cos(e)*a,t[1]=Math.sin(e)*a,t[2]=r*n,t}function Jt(t,n,e){var r=n[0],a=n[1],o=n[2],u=e[3]*r+e[7]*a+e[11]*o+e[15];return u=u||1,t[0]=(e[0]*r+e[4]*a+e[8]*o+e[12])/u,t[1]=(e[1]*r+e[5]*a+e[9]*o+e[13])/u,t[2]=(e[2]*r+e[6]*a+e[10]*o+e[14])/u,t}function Yt(t,n,e){var r=n[0],a=n[1],o=n[2];return t[0]=r*e[0]+a*e[3]+o*e[6],t[1]=r*e[1]+a*e[4]+o*e[7],t[2]=r*e[2]+a*e[5]+o*e[8],t}function zt(t,n,e){var r=e[0],a=e[1],o=e[2],u=e[3],i=n[0],s=n[1],c=n[2],f=a*c-o*s,h=o*i-r*c,l=r*s-a*i,d=a*l-o*h,m=o*f-r*l,M=r*h-a*f,p=2*u;return f*=p,h*=p,l*=p,d*=2,m*=2,M*=2,t[0]=i+f+d,t[1]=s+h+m,t[2]=c+l+M,t}function Kt(t,n,e,r){var a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t}function Qt(t,n,e,r){var a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t}function tn(t,n,e,r){var a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t}function nn(t,n){var e=t[0],r=t[1],a=t[2],o=n[0],u=n[1],i=n[2],s=Math.sqrt(e*e+r*r+a*a)*Math.sqrt(o*o+u*u+i*i),c=s&&jt(t,n)/s;return Math.acos(Math.min(Math.max(c,-1),1))}function en(t){return t[0]=0,t[1]=0,t[2]=0,t}function rn(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function an(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}function on(t,n){var e=t[0],r=t[1],a=t[2],o=n[0],u=n[1],i=n[2];return Math.abs(e-o)<=U*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(r-u)<=U*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-i)<=U*Math.max(1,Math.abs(a),Math.abs(i))}var un,sn=Ft,cn=It,fn=At,hn=Bt,ln=Rt,dn=wt,mn=kt,Mn=(un=xt(),function(t,n,e,r,a,o){var u,i;for(n||(n=3),e||(e=0),i=r?Math.min(r*n+e,t.length):t.length,u=e;u<i;u+=n)un[0]=t[u],un[1]=t[u+1],un[2]=t[u+2],a(un,un,o),t[u]=un[0],t[u+1]=un[1],t[u+2]=un[2];return t});function pn(t){var n=t[0],e=t[1],r=t[2],a=t[3];return Math.hypot(n,e,r,a)}function bn(t){var n=t[0],e=t[1],r=t[2],a=t[3];return n*n+e*e+r*r+a*a}!function(){var t,n=(t=new S(4),S!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t)}();function gn(){var t=new S(4);return S!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function yn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function xn(t,n,e){e*=.5;var r=Math.sin(e);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(e),t}function vn(t,n){var e=2*Math.acos(n[3]),r=Math.sin(e/2);return r>U?(t[0]=n[0]/r,t[1]=n[1]/r,t[2]=n[2]/r):(t[0]=1,t[1]=0,t[2]=0),e}function wn(t,n){var e=Kn(t,n);return Math.acos(2*e*e-1)}function Tn(t,n,e){var r=n[0],a=n[1],o=n[2],u=n[3],i=e[0],s=e[1],c=e[2],f=e[3];return t[0]=r*f+u*i+a*c-o*s,t[1]=a*f+u*s+o*i-r*c,t[2]=o*f+u*c+r*s-a*i,t[3]=u*f-r*i-a*s-o*c,t}function Un(t,n,e){e*=.5;var r=n[0],a=n[1],o=n[2],u=n[3],i=Math.sin(e),s=Math.cos(e);return t[0]=r*s+u*i,t[1]=a*s+o*i,t[2]=o*s-a*i,t[3]=u*s-r*i,t}function Sn(t,n,e){e*=.5;var r=n[0],a=n[1],o=n[2],u=n[3],i=Math.sin(e),s=Math.cos(e);return t[0]=r*s-o*i,t[1]=a*s+u*i,t[2]=o*s+r*i,t[3]=u*s-a*i,t}function _n(t,n,e){e*=.5;var r=n[0],a=n[1],o=n[2],u=n[3],i=Math.sin(e),s=Math.cos(e);return t[0]=r*s+a*i,t[1]=a*s-r*i,t[2]=o*s+u*i,t[3]=u*s-o*i,t}function Fn(t,n){var e=n[0],r=n[1],a=n[2];return t[0]=e,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-e*e-r*r-a*a)),t}function In(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],u=Math.sqrt(e*e+r*r+a*a),i=Math.exp(o),s=u>0?i*Math.sin(u)/u:0;return t[0]=e*s,t[1]=r*s,t[2]=a*s,t[3]=i*Math.cos(u),t}function An(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],u=Math.sqrt(e*e+r*r+a*a),i=u>0?Math.atan2(u,o)/u:0;return t[0]=e*i,t[1]=r*i,t[2]=a*i,t[3]=.5*Math.log(e*e+r*r+a*a+o*o),t}function Ln(t,n,e){return An(t,n),zn(t,t,e),In(t,t),t}function Dn(t,n,e,r){var a,o,u,i,s,c=n[0],f=n[1],h=n[2],l=n[3],d=e[0],m=e[1],M=e[2],p=e[3];return(o=c*d+f*m+h*M+l*p)<0&&(o=-o,d=-d,m=-m,M=-M,p=-p),1-o>U?(a=Math.acos(o),u=Math.sin(a),i=Math.sin((1-r)*a)/u,s=Math.sin(r*a)/u):(i=1-r,s=r),t[0]=i*c+s*d,t[1]=i*f+s*m,t[2]=i*h+s*M,t[3]=i*l+s*p,t}function Nn(t){var n=_(),e=_(),r=_(),a=Math.sqrt(1-n),o=Math.sqrt(n);return t[0]=a*Math.sin(2*Math.PI*e),t[1]=a*Math.cos(2*Math.PI*e),t[2]=o*Math.sin(2*Math.PI*r),t[3]=o*Math.cos(2*Math.PI*r),t}function On(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],u=e*e+r*r+a*a+o*o,i=u?1/u:0;return t[0]=-e*i,t[1]=-r*i,t[2]=-a*i,t[3]=o*i,t}function En(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t}function Vn(t,n){var e,r=n[0]+n[4]+n[8];if(r>0)e=Math.sqrt(r+1),t[3]=.5*e,e=.5/e,t[0]=(n[5]-n[7])*e,t[1]=(n[6]-n[2])*e,t[2]=(n[1]-n[3])*e;else{var a=0;n[4]>n[0]&&(a=1),n[8]>n[3*a+a]&&(a=2);var o=(a+1)%3,u=(a+2)%3;e=Math.sqrt(n[3*a+a]-n[3*o+o]-n[3*u+u]+1),t[a]=.5*e,e=.5/e,t[3]=(n[3*o+u]-n[3*u+o])*e,t[o]=(n[3*o+a]+n[3*a+o])*e,t[u]=(n[3*u+a]+n[3*a+u])*e}return t}function qn(t,n,e,r){var a=.5*Math.PI/180;n*=a,e*=a,r*=a;var o=Math.sin(n),u=Math.cos(n),i=Math.sin(e),s=Math.cos(e),c=Math.sin(r),f=Math.cos(r);return t[0]=o*s*f-u*i*c,t[1]=u*i*f+o*s*c,t[2]=u*s*c-o*i*f,t[3]=u*s*f+o*i*c,t}function Bn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Rn,kn,Cn,Hn,Pn,jn,Gn,$n=function(t){var n=new S(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},Xn=function(t,n,e,r){var a=new S(4);return a[0]=t,a[1]=n,a[2]=e,a[3]=r,a},Wn=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},Zn=function(t,n,e,r,a){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t},Jn=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t},Yn=Tn,zn=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t},Kn=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]},Qn=function(t,n,e,r){var a=n[0],o=n[1],u=n[2],i=n[3];return t[0]=a+r*(e[0]-a),t[1]=o+r*(e[1]-o),t[2]=u+r*(e[2]-u),t[3]=i+r*(e[3]-i),t},te=pn,ne=te,ee=bn,re=ee,ae=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],u=e*e+r*r+a*a+o*o;return u>0&&(u=1/Math.sqrt(u)),t[0]=e*u,t[1]=r*u,t[2]=a*u,t[3]=o*u,t},oe=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},ue=function(t,n){var e=t[0],r=t[1],a=t[2],o=t[3],u=n[0],i=n[1],s=n[2],c=n[3];return Math.abs(e-u)<=U*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(r-i)<=U*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-s)<=U*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-c)<=U*Math.max(1,Math.abs(o),Math.abs(c))},ie=(Rn=xt(),kn=Tt(1,0,0),Cn=Tt(0,1,0),function(t,n,e){var r=jt(n,e);return r<-.999999?(Gt(Rn,kn,n),dn(Rn)<1e-6&&Gt(Rn,Cn,n),Pt(Rn,Rn),xn(t,Rn,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(Gt(Rn,n,e),t[0]=Rn[0],t[1]=Rn[1],t[2]=Rn[2],t[3]=1+r,ae(t,t))}),se=(Hn=gn(),Pn=gn(),function(t,n,e,r,a,o){return Dn(Hn,n,a,o),Dn(Pn,e,r,o),Dn(t,Hn,Pn,2*o*(1-o)),t}),ce=(jn=new S(9),S!=Float32Array&&(jn[1]=0,jn[2]=0,jn[3]=0,jn[5]=0,jn[6]=0,jn[7]=0),jn[0]=1,jn[4]=1,jn[8]=1,Gn=jn,function(t,n,e,r){return Gn[0]=e[0],Gn[3]=e[1],Gn[6]=e[2],Gn[1]=r[0],Gn[4]=r[1],Gn[7]=r[2],Gn[2]=-n[0],Gn[5]=-n[1],Gn[8]=-n[2],ae(t,Vn(t,Gn))});const fe=1313821514,he=5130562;let le=new TextDecoder;function de(t){return le.decode(t)}class me{constructor(t){const n=new DataView(t,0,12),e=new DataView(t,12),r=de(new Uint8Array(t,0,4)),a=n.getUint32(4,!0);n.getUint32(8,!0);if("glTF"!==r)throw new Error("Unsupported glTF-Binary header.");if(a<2)throw new Error("Unsupported legacy binary file detected.");let o=0;for(;o<e.byteLength;){const n=e.getUint32(o,!0);o+=4;const r=e.getUint32(o,!0);switch(o+=4,r){case fe:{const e=new Uint8Array(t,12+o,n);this.json=de(e)}break;case he:{const e=12+o;this.binaryChunk=new Uint8Array(t,e,n)}break;default:console.warn("Skipping unexpected glTF-Binary chunk type:",r)}o+=n}x(!!this.json,"glTF-Binary: JSON content not found.")}}class Me{constructor(t,n){this.gltf=t,this.bufferData=n}bufferViewData(t){if(!this.gltf.bufferViews)throw new Error("No buffer views found.");const n=this.gltf.bufferViews[t],e=v(this.bufferData[n.buffer],`No data for buffer ${n.buffer}`),r=n.byteLength||0,a=n.byteOffset||0,o=e.buffer,u=e.byteOffset;return new Uint8Array(o,u+a,r)}accessorData(t){if(!this.gltf.accessors)throw new Error("No accessors views found.");const n=this.gltf.accessors[t],e=we[n.type];let r;const a=ve[n.componentType],o=a.BYTES_PER_ELEMENT*e*n.count;if(void 0!==n.bufferView){const t=this.bufferViewData(n.bufferView);r=new a(t.buffer,t.byteOffset+T(n.byteOffset,0),n.count*e)}else r=new a(o);if(n.sparse){const{count:t,indices:a,values:o}=n.sparse;let u=ve[a.componentType],i=this.bufferViewData(a.bufferView);const s=new u(i.buffer,i.byteOffset+(a.byteOffset||0),t);u=ve[n.componentType],i=this.bufferViewData(o.bufferView);const c=new u(this.bufferViewData(o.bufferView).buffer,i.byteOffset+(o.byteOffset||0),t*e);n.bufferView&&(r=new Uint8Array(r));const f=new ve[n.componentType](r.buffer);for(let n=0;n<t;n++)for(let t=0;t<e;t++)f[e*s[n]+t]=c[e*n+t]}return r}}function pe(t,n){let e;switch(n){case 5120:e=s.Char;break;case 5121:e=s.Uchar;break;case 5122:e=s.Short;break;case 5123:e=s.Ushort;break;case 5125:e=s.Uint;break;case 5126:e=s.Float;break;default:throw new Error("Invalid GLTF component type")}switch(t){case"SCALAR":e+=0;break;case"VEC2":e+=1;break;case"VEC3":e+=2;break;case"VEC4":e+=3;break;case"MAT2":throw new Error("2x2 Matrice not yet supported");case"MAT3":e=s.Float3x3;break;case"MAT4":e=s.Float4x4}return e}function be(t){switch(t){case 5124:return s.Int;case 5126:return s.Float;case 35664:return s.Float2;case 35665:return s.Float3;case 35666:return s.Float4;case 35667:return s.Int2;case 35668:return s.Int3;case 35669:return s.Int4;case 35675:return s.Float3x3;case 35676:return s.Float4x4;case 35678:return s.Texture2D;default:throw new Error("Invalid GLTF component type")}}function ge(t){switch(t){case 0:return d.Points;case 1:return d.Lines;case 2:return d.LineLoop;case 3:return d.LineStrip;case 4:return d.Triangles;case 5:return d.TriangleStrip;case 6:return d.TriangleFan;default:throw new Error("Invalid GLTF primitive mode")}}const ye={9728:h.Nearest,9729:h.Linear},xe={9728:h.Nearest,9729:h.Linear},ve={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},we={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Te={POSITION:"a_pos",NORMAL:"a_normal",TANGENT:"a_tangent",JOINTS_0:"a_joints",WEIGHTS_0:"a_weights",COLOR_0:"a_color",TEXCOORD_0:"a_uv0",TEXCOORD_1:"a_uv1",MORPH0_POSITION:"a_posMorph0"},Ue={NORMAL:"HAS_NORMALS 1",TANGENT:"HAS_TANGENT 1",JOINTS_0:"HAS_JOINT_SET0 1",WEIGHTS_0:"HAS_WEIGHT_SET0 1",COLOR_0:"HAS_COLOR0 1",TEXCOORD_0:"HAS_UV_SET0 1",TEXCOORD_1:"HAS_UV_SET1 1"};function Se(t,n,e){const r=e,a=n.gltf;let o;if(!w(e.material))throw new Error("Default material not yet supported");o=v(t.materials[e.material]);const u=[];let i=void 0;const s=[];if(w(r.indices)){const e=v(a.accessors)[r.indices];i=_e(t,n,v(e.bufferView),m.Index)}let c;if(w(o.technique)){c={};const t=Object.keys(o.technique.attributes);for(const n of t){c[o.technique.attributes[n].semantic]=n}}else c=Te;const f={buffers:[]},h={};for(let e in r.attributes){const o=v(a.accessors)[r.attributes[e]],i=v(o.bufferView,"Undefined accessor buffers are not yet implemented"),l=h[i];let d;if(w(l))d=f.buffers[l];else{h[i]=s.length;const e=_e(t,n,i,m.Vertex);d={stride:T(v(a.bufferViews)[i].byteStride,0),layout:{}},s.push(e),f.buffers.push(d)}const M=Ue[e];w(M)&&u.push(M);const p=v(c[e],`Unknown vertex attribute semantic: ${e}`);d.layout[p]={type:pe(o.type,o.componentType),offset:o.byteOffset||0}}if(r.targets){u.push("HAS_MORPH0 1"),x(1===r.targets.length,"Only 1 morph target is currently supported");const e=r.targets[0];for(let r in e)if("POSITION"===r){const o=v(a.accessors)[e[r]],u=v(o.bufferView,"Undefined accessor buffers are not yet implemented"),i=v(a.bufferViews)[u];let h=f.buffers[u];const l=_e(t,n,u,m.Vertex);w(h)||(s[u]=l,h=f.buffers[u]={stride:T(i.byteStride,0),layout:{}});const d=c[`MORPH0_${r}`];h.layout[d]={type:pe(o.type,o.componentType),offset:o.byteOffset||0}}}const l=a.accessors[v(r.indices,"Only indexed primitives are currently supported")],d=v(i,"Only indexed primitives are currently supported");return{mesh:{elementCount:l.count,vertexBuffers:s,primitiveType:ge(T(r.mode,4)),indexType:pe(l.type,l.componentType),indexBuffer:d,vertexLayout:f},material:o}}function _e(t,n,e,r){if(w(t.bufferViews[e]))return t.bufferViews[e];const a=v(n.gltf.bufferViews)[e].name||`buffer${e}`;t.bufferData[e]=new Uint8Array(n.bufferViewData(e)).buffer,x(!t.transferList.includes(t.bufferData[e])),t.transferList.push(t.bufferData[e]);const o={name:a,type:r,buffer:-1};return t.bufferViews[e]=o,o}const Fe=self,Ie={texture:new class{async loadAsync(t){const n=await fetch(t.source.uri);if(200!=n.status)throw new Error("Failed to download image");const e=t.source.uri.match(/.*\/(.+?)\./);t.name=e&&e.length>1?e[1]:"Unknown",self.createImageBitmap?(t.imageBitmap=await createImageBitmap(await n.blob()),t.transferList.push(t.imageBitmap),t.status=o.LoadingSync):(t.imageBuffer=await n.arrayBuffer(),t.transferList.push(t.imageBuffer),t.status=o.LoadingSync)}loadSync(t,n){if(n.imageBitmap)n.texture=t.renderer.createTexture(n.name,{usage:p.Static,type:c.Texture2D,format:f.U8x3,maxAnistropy:16},n.imageBitmap),n.imageBitmap.close(),delete n.imageBitmap,n.status=o.Loaded;else{if(n.imageBuffer){var e=new Blob([n.imageBuffer],{type:"image/jpeg"});let t=window.URL.createObjectURL(e);delete n.imageBuffer,n.imageElement=new Image,n.imageElement.src=t,n.status=o.LoadingSync}w(n.imageElement)&&n.imageElement.complete&&(n.texture=t.renderer.createTexture(n.name,{usage:p.Static,type:c.Texture2D,format:f.U8x3,maxAnistropy:16},n.imageElement),delete n.imageElement,n.status=o.Loaded)}}unloadSync(t,n){w(n.texture)&&t.renderer.removeTexture(n.texture),w(n.imageBitmap)&&n.imageBitmap.close()}},gltf:new class{async loadAsync(t){const n=await fetch(t.source.uri);if(200!=n.status)throw new Error("Failed to download GLTF");const e=await n.arrayBuffer(),i=new me(e),s=JSON.parse(i.json),h=new Me(s,[i.binaryChunk]);t.nodes=[],t.meshes=[],t.materials=[],t.textures=[],t.bufferViews=[],t.animations=[],t.rootNodeIds=[],t.imageData=[],t.bufferData=[];const l=function(t,n){const e=T(n.gltf.images,[]),r=T(n.gltf.textures,[]),a=T(n.gltf.samplers,[]),o=[];t.textures=[],t.imageData=[];const u={type:c.Texture2D,format:f.U8x4,usage:p.Static},i={wrapS:10497,wrapT:10497};for(let r=0;r<e.length;r++){const a=v(e[r]),u=v(a.bufferView,"Image loading from a URI is not yet supported"),i=n.bufferViewData(u);let s;if(w(self.createImageBitmap)){const t=new Blob([i],{type:v(a.mimeType)});s=createImageBitmap(t)}else s=Promise.resolve(i.buffer);o.push(s.then(n=>{x(!t.transferList.includes(n)),t.transferList.push(n),t.imageData[r]=n}))}return t.textures=r.map(t=>{const n=T(a[t.sampler],i),e=Object.assign({},u);return w(n.magFilter)&&(e.defaultMagFilter=ye[n.magFilter],w(e.defaultMagFilter)||console.warn(`Unsupported texture mag filter: ${n.magFilter}`)),w(n.minFilter)&&(e.defaultMagFilter=xe[n.minFilter],w(e.defaultMagFilter)||console.warn(`Unsupported texture min filter: ${n.magFilter}`)),(w(n.wrapS)||w(n.wrapT))&&(w(e.defaultMagFilter)||console.warn(`Texture wrapping not yet supported: ${n.magFilter}`)),{name:t.name,desc:e,imageIndex:v(t.source),id:-1}}),o}(t,h);!function(t,n){var e;if(!(null===(e=n.gltf.extensionsUsed)||void 0===e?void 0:e.includes("KHR_techniques_webgl")))return;const r=v(n.gltf.extensions.KHR_techniques_webgl);t.shaderData=r.shaders.map((e,r)=>{const a=v(e.bufferView,"Shader loading from URI not yet supported"),o=new Uint8Array(n.bufferViewData(a)).buffer;return x(!t.transferList.includes(o)),t.transferList.push(o),o}),t.shaders=r.programs.map(t=>({id:-1,name:t.name,fsIndex:t.fragmentShader,vsIndex:t.vertexShader})),t.techniques=r.techniques.map((n,e)=>{const r={};for(const t in T(n.uniforms,{})){const e=n.uniforms[t];r[t]=Object.assign(Object.assign({},e),{type:be(e.type)})}return{shader:t.shaders[n.program],attributes:T(n.attributes,{}),uniforms:r}})}(t,h),function(t,n){const e=T(n.gltf.materials,[]);t.materials=[],t.materials=e.map((n,e)=>{var r;const a={name:T(n.name,`Material${e}`),renderFormat:{blendingEnabled:!1},cullMode:n.doubleSided?b.None:b.Back},o=null===(r=n.extensions)||void 0===r?void 0:r.KHR_techniques_webgl;return w(o)&&(a.technique=t.techniques[o.technique],a.values=o.values),a})}(t,h),function(t,n){const e=T(n.gltf.meshes,[]);t.meshes=[];for(let r=0;r<e.length;r++){const a=v(e[r]),o=[];for(let e of a.primitives)o.push(Se(t,n,e));const u={name:a.name,id:r,primitives:o};t.meshes[r]=u}}(t,h),function(t,n){const e=T(n.gltf.nodes,[]);t.nodes=[];for(let o=0;o<e.length;o++){const i=v(e[o]),s=T(i.scale,[1,1,1]),c=T(i.rotation,[0,0,0,1]),f=T(i.translation,[0,0,0]),h={name:i.name,scale:a.fromValues(s[0],s[1],s[2]),rotation:u.fromValues(c[0],c[1],c[2],c[3]),translation:a.fromValues(f[0],f[1],f[2]),morphWeight:T(i.weights,[0])[0]};if(w(i.matrix)?(h.transform=new Float32Array(i.matrix),r.getRotation(h.rotation,h.transform),r.getTranslation(h.translation,h.transform),r.getScaling(h.scale,h.transform)):h.transform=r.fromRotationTranslationScale(r.create(),h.rotation,h.translation,h.scale),w(i.mesh)&&(h.meshId=i.mesh),w(i.skin)&&(h.skinId=i.skin),w(i.children)){h.children=[];for(let t=0;t<i.children.length;t++){const e=i.children[t];v(n.gltf.nodes)[e];h.children.push(e)}}t.nodes.push(h)}}(t,h),function(t,n){const e=T(n.gltf.skins,[]);t.skins=[];for(let r=0;r<e.length;r++){const a=e[r];let o=void 0;if(w(a.inverseBindMatrices)){const e=new Float32Array(n.accessorData(a.inverseBindMatrices));x(!t.transferList.includes(e.buffer)),t.transferList.push(e.buffer),o=[];for(let t=0;t<a.joints.length;t++)o[t]=e.subarray(16*t,16*t+16)}t.skins[r]={name:a.name,skeleton:a.skeleton,joints:a.joints,inverseBindMatrices:o}}}(t,h),function(t,n){const e=T(n.gltf.scene,0);if(w(e)){const r=v(n.gltf.scenes),a=v(r[e]);t.rootNodeIds=T(a.nodes,[])}}(t,h),function(t,n){const e=T(n.gltf.animations,[]);t.animations=[];for(let r=0;r<e.length;r++){const a=e[r],o=a.samplers.map(t=>(x(5126===n.gltf.accessors[t.input].componentType,"Non-float animation time type unsupported"),x(5126===n.gltf.accessors[t.output].componentType,"Non-float animation time type unsupported"),{times:n.accessorData(t.input),floats:n.accessorData(t.output)})),u=[],i=[],s=[],c=[];a.channels.forEach(t=>{const n={nodeId:v(t.target.node),times:o[t.sampler].times,values:o[t.sampler].floats};switch(t.target.path){case"translation":u.push(n);break;case"rotation":i.push(n);break;case"scale":s.push(n);break;case"weight":c.push(n)}});const f=Math.max(...a.samplers.map(t=>v(n.gltf.accessors[t.input].max)[0]));t.animations.push({name:a.name,maxTime:f,scales:s,rotations:i,translations:u,weights:c})}}(t,h),await Promise.all(l),x(!t.transferList.includes(e)),t.status=o.LoadingSync}loadSync(t,n){for(let e in n.bufferData){const r=n.bufferViews[e],a=n.bufferData[e];r.buffer=t.renderer.createBuffer(r.name,r.type,p.Static,a)}for(const e of T(n.shaders,[])){const r=n.shaderData[e.vsIndex],a=n.shaderData[e.fsIndex],o={name:e.name,vertSource:de(r),fragSource:de(a)};e.id=t.renderer.createShader(o)}if(w(self.createImageBitmap)){for(const e of n.textures){const r=n.imageData[e.imageIndex];x(r instanceof ImageBitmap),e.id=t.renderer.createTexture(e.name,e.desc,r)}for(const t of n.imageData)t.close();delete n.imageData,n.status=o.Loaded}else{let r=0;for(const a of n.textures){const u=n.imageData[a.imageIndex];if(-1===a.id){if(u instanceof ArrayBuffer){var e=new Blob([u],{type:"image/jpeg"});let t=window.URL.createObjectURL(e);n.imageData[a.imageIndex]=new Image,n.imageData[a.imageIndex].src=t,n.status=o.LoadingSync}n.imageData[a.imageIndex].complete&&(a.id=t.renderer.createTexture(a.name,{usage:p.Static,type:c.Texture2D,format:f.U8x3,maxAnistropy:16},n.imageData[a.imageIndex]))}else r+=1}r===n.textures.length&&(delete n.imageData,n.status=o.Loaded)}}unloadSync(t,n){}}};onmessage=async t=>{Le.onMessage(t)};class Ae{constructor(){this.processed=[],setInterval(()=>this.update(),Ae.kTickIntervalMs)}async onMessage(t){const n=t.data;for(let t of n){const n=Ie[t.source.type];if(n||(t.status=o.Failed),t.status===o.LoadingAsync)try{await n.loadAsync(t)}catch(n){t.status=o.Failed,t.error=n.stack}this.processed.push(t)}}update(){if(this.processed.length>0){const t=[];for(let n of this.processed)Array.prototype.push.apply(t,n.transferList);Fe.postMessage(this.processed,t),this.processed.length=0}}}Ae.kTickIntervalMs=33;const Le=new Ae;n.default={}}});